<!DOCTYPE html>
<!-- saved from url=(0065)http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html -->
<html lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Java内存模型 - 残雪余香 - 博客园</title>
<link type="text/css" rel="stylesheet" href="./Java内存模型 - 残雪余香 - 博客园_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="./Java内存模型 - 残雪余香 - 博客园_files/bundle-Cogitation.css">
<link id="mobile-style" media="only screen and (max-width: 768px)" type="text/css" rel="stylesheet" href="./Java内存模型 - 残雪余香 - 博客园_files/bundle-Cogitation-mobile.css">
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/nexiyi/rss">
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/nexiyi/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/nexiyi/wlwmanifest.xml">
<script src="./Java内存模型 - 残雪余香 - 博客园_files/jquery.js.下载" type="text/javascript"></script>  
<script type="text/javascript">var currentBlogApp = 'nexiyi', cb_enable_mathjax=false;var isLogined=false;</script>
<script src="./Java内存模型 - 残雪余香 - 博客园_files/blog-common.js.下载" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>

<div id="top">
	
<div>
	<table>
		<tbody><tr>
			<td class="HeaderTitles">
				<h1 class="HeaderTitle"><a id="Header1_HeaderTitle" class="HeaderMainTitle" href="http://www.cnblogs.com/nexiyi/">残雪余香</a></h1>
				<p id="tagline"></p>
			</td>
		</tr>
	</tbody></table>
</div>
<div class="HeaderBar">
	<table id="HeaderBar" class="HeaderBar" cellpadding="0" cellspacing="0">
		<tbody><tr>
			<td class="HeaderBarTab" nowrap="">
&nbsp;
<a id="blog_nav_sitehome" href="http://www.cnblogs.com/">博客园</a> ::
<a id="blog_nav_myhome" href="http://www.cnblogs.com/nexiyi/">首页</a> ::
<a href="http://q.cnblogs.com/" class="menu">博问</a> ::
<a href="http://home.cnblogs.com/ing/" class="menu">闪存</a> ::
<a id="blog_nav_newpost" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a> ::
<a id="blog_nav_contact" accesskey="9" rel="nofollow" href="https://msg.cnblogs.com/send/%E6%AE%8B%E9%9B%AA%E4%BD%99%E9%A6%99">联系</a> ::
<a id="blog_nav_rss" href="http://www.cnblogs.com/nexiyi/rss">订阅</a>
<a id="blog_nav_rss_image" class="XMLLink" href="http://www.cnblogs.com/nexiyi/rss"><img src="./Java内存模型 - 残雪余香 - 博客园_files/xml.gif" alt="订阅"></a> ::
<a id="blog_nav_admin" rel="nofollow" href="https://i.cnblogs.com/">管理</a> ::

</td>
			<td><img id="Header1_BlueTab" src="./Java内存模型 - 残雪余香 - 博客园_files/BlueTabRight.gif" align="absmiddle"></td>
			<td class="HeaderBarTabBack" nowrap="" width="100%">
				<div id="blog_stats">
<div class="BlogStatsBar">
	<table class="BlogStatsBar">
		<tbody><tr>
			<td width="100%">
			</td>
			<td class="BlogStatsBar" nowrap="">
				&nbsp;
				69 
				随笔&nbsp;::
				1 文章
				::
				31 评论
				::
				0 引用
			</td>
		</tr>
	</tbody></table>
</div>
</div>
			</td>
		</tr>
	</tbody></table>
</div>

</div>
<div id="leftmenu">	

	    <div id="blog-calendar" style=""><table id="blogCalendar" class="Cal" cellspacing="0" cellpadding="0" title="Calendar">
	<tbody><tr><td colspan="7"><table class="CalTitle" cellspacing="0">
		<tbody><tr><td class="CalNextPrev"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2017/08/01&#39;);return false;">&lt;</a></td><td align="center">2017年9月</td><td class="CalNextPrev" align="right"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2017/10/01&#39;);return false;">&gt;</a></td></tr>
	</tbody></table></td></tr><tr><th class="CalDayHeader" align="center" abbr="日" scope="col">日</th><th class="CalDayHeader" align="center" abbr="一" scope="col">一</th><th class="CalDayHeader" align="center" abbr="二" scope="col">二</th><th class="CalDayHeader" align="center" abbr="三" scope="col">三</th><th class="CalDayHeader" align="center" abbr="四" scope="col">四</th><th class="CalDayHeader" align="center" abbr="五" scope="col">五</th><th class="CalDayHeader" align="center" abbr="六" scope="col">六</th></tr><tr><td class="CalOtherMonthDay" align="center">27</td><td class="CalOtherMonthDay" align="center">28</td><td class="CalOtherMonthDay" align="center">29</td><td class="CalOtherMonthDay" align="center">30</td><td class="CalOtherMonthDay" align="center">31</td><td align="center">1</td><td class="CalWeekendDay" align="center">2</td></tr><tr><td class="CalWeekendDay" align="center">3</td><td align="center">4</td><td align="center">5</td><td class="CalTodayDay" align="center">6</td><td align="center">7</td><td align="center">8</td><td class="CalWeekendDay" align="center">9</td></tr><tr><td class="CalWeekendDay" align="center">10</td><td align="center">11</td><td align="center">12</td><td align="center">13</td><td align="center">14</td><td align="center">15</td><td class="CalWeekendDay" align="center">16</td></tr><tr><td class="CalWeekendDay" align="center">17</td><td align="center">18</td><td align="center">19</td><td align="center">20</td><td align="center">21</td><td align="center">22</td><td class="CalWeekendDay" align="center">23</td></tr><tr><td class="CalWeekendDay" align="center">24</td><td align="center">25</td><td align="center">26</td><td align="center">27</td><td align="center">28</td><td align="center">29</td><td class="CalWeekendDay" align="center">30</td></tr><tr><td class="CalOtherMonthDay" align="center">1</td><td class="CalOtherMonthDay" align="center">2</td><td class="CalOtherMonthDay" align="center">3</td><td class="CalOtherMonthDay" align="center">4</td><td class="CalOtherMonthDay" align="center">5</td><td class="CalOtherMonthDay" align="center">6</td><td class="CalOtherMonthDay" align="center">7</td></tr>
</tbody></table></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
		
<h3>公告</h3>
<div class="News">
	<div id="blog-news"><div id="profile_block">昵称：<a href="http://home.cnblogs.com/u/nexiyi/">残雪余香</a><br>园龄：<a href="http://home.cnblogs.com/u/nexiyi/" title="入园时间：2012-12-02">4年9个月</a><br>粉丝：<a href="http://home.cnblogs.com/u/nexiyi/followers/">94</a><br>关注：<a href="http://home.cnblogs.com/u/nexiyi/followees/">15</a><div id="p_b_follow"><a href="javascript:void(0);" onclick="follow(&#39;c494465c-4e3c-e211-aa8f-842b2b196315&#39;)">+加关注</a></div></div></div><script type="text/javascript">loadBlogNews();</script>
</div>

		<div id="blog-sidecolumn"><div id="sidebar_search" class="sidebar-block">
<div id="sidebar_search" class="mySearch">
<h3 class="catListTitle">搜索</h3>
<div id="sidebar_search_box">
<div id="widget_my_zzk" class="div_my_zzk"><input type="text" id="q" onkeydown="return zzk_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="zzk_go()" type="button" value="找找看" id="btnZzk" class="btn_my_zzk"></div>
<div id="widget_my_google" class="div_my_zzk"><input type="text" name="google_q" id="google_q" onkeydown="return google_go_enter(event)" class="input_my_zzk">&nbsp;<input onclick="google_go()" type="button" value="谷歌搜索" class="btn_my_zzk"></div>
</div>
</div>

</div><div id="sidebar_shortcut" class="sidebar-block">
<h3 class="catListTitle">常用链接</h3>
<ul>
<li><a href="http://www.cnblogs.com/nexiyi/p/" title="我的博客的随笔列表">我的随笔</a></li><li><a href="http://www.cnblogs.com/nexiyi/MyComments.html" title="我发表过的评论列表">我的评论</a></li><li><a href="http://www.cnblogs.com/nexiyi/OtherPosts.html" title="我评论过的随笔列表">我的参与</a></li><li><a href="http://www.cnblogs.com/nexiyi/RecentComments.html" title="我的博客的评论列表">最新评论</a></li><li><a href="http://www.cnblogs.com/nexiyi/tag/" title="我的博客的标签列表">我的标签</a></li>
</ul>
<div id="itemListLin_con" style="display:none;">

</div></div><div id="sidebar_toptags" class="sidebar-block">
<h3 class="catListTitle">我的标签</h3>
<div id="MyTag">
<ul>
<li><a href="http://www.cnblogs.com/nexiyi/tag/Java/">Java</a>(17)</li><li><a href="http://www.cnblogs.com/nexiyi/tag/hbase/">hbase</a>(7)</li><li><a href="http://www.cnblogs.com/nexiyi/tag/python/">python</a>(6)</li><li><a href="http://www.cnblogs.com/nexiyi/tag/Linux/">Linux</a>(4)</li><li><a href="http://www.cnblogs.com/nexiyi/tag/tajo/">tajo</a>(3)</li><li><a href="http://www.cnblogs.com/nexiyi/tag/pydoop/">pydoop</a>(3)</li><li><a href="http://www.cnblogs.com/nexiyi/tag/%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/">分布式数据仓库</a>(3)</li><li><a href="http://www.cnblogs.com/nexiyi/tag/Hadoop/">Hadoop</a>(3)</li><li><a href="http://www.cnblogs.com/nexiyi/tag/%E4%BB%A3%E7%90%86/">代理</a>(2)</li><li><a href="http://www.cnblogs.com/nexiyi/tag/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>(2)</li><li><a href="http://www.cnblogs.com/nexiyi/tag/">更多</a></li>
</ul>
</div></div><div id="sidebar_categories">
		<h3>随笔分类<span style="font-size:11px;font-weight:normal">(71)</span></h3>
		
				<ul>
			
				<li><a id="CatList_LinkList_0_Link_0" href="http://www.cnblogs.com/nexiyi/category/435746.html">DataBase(5)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_1" href="http://www.cnblogs.com/nexiyi/category/434522.html">Hadoop(5)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_2" href="http://www.cnblogs.com/nexiyi/category/598028.html">HBase(6)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_3" href="http://www.cnblogs.com/nexiyi/category/434521.html">Java(24)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_4" href="http://www.cnblogs.com/nexiyi/category/434520.html">JavaScript(1)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_5" href="http://www.cnblogs.com/nexiyi/category/441549.html">Linux(7)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_6" href="http://www.cnblogs.com/nexiyi/category/436698.html">python(9)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_7" href="http://www.cnblogs.com/nexiyi/category/664167.html">The art of code(1)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_8" href="http://www.cnblogs.com/nexiyi/category/435054.html">Web应用(4)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_9" href="http://www.cnblogs.com/nexiyi/category/537464.html">大数据处理(4)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_10" href="http://www.cnblogs.com/nexiyi/category/690582.html">数据结构(1)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_11" href="http://www.cnblogs.com/nexiyi/category/443371.html">随心所欲(1)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_12" href="http://www.cnblogs.com/nexiyi/category/444729.html">网络知识(3)</a> </li>
			
				</ul>
			
	
		<h3>随笔档案<span style="font-size:11px;font-weight:normal">(69)</span></h3>
		
				<ul>
			
				<li><a id="CatList_LinkList_1_Link_0" href="http://www.cnblogs.com/nexiyi/archive/2015/05.html">2015年5月 (5)</a> </li>
			
				<li><a id="CatList_LinkList_1_Link_1" href="http://www.cnblogs.com/nexiyi/archive/2015/03.html">2015年3月 (1)</a> </li>
			
				<li><a id="CatList_LinkList_1_Link_2" href="http://www.cnblogs.com/nexiyi/archive/2014/08.html">2014年8月 (4)</a> </li>
			
				<li><a id="CatList_LinkList_1_Link_3" href="http://www.cnblogs.com/nexiyi/archive/2014/07.html">2014年7月 (3)</a> </li>
			
				<li><a id="CatList_LinkList_1_Link_4" href="http://www.cnblogs.com/nexiyi/archive/2014/06.html">2014年6月 (1)</a> </li>
			
				<li><a id="CatList_LinkList_1_Link_5" href="http://www.cnblogs.com/nexiyi/archive/2014/05.html">2014年5月 (3)</a> </li>
			
				<li><a id="CatList_LinkList_1_Link_6" href="http://www.cnblogs.com/nexiyi/archive/2014/04.html">2014年4月 (1)</a> </li>
			
				<li><a id="CatList_LinkList_1_Link_7" href="http://www.cnblogs.com/nexiyi/archive/2014/03.html">2014年3月 (4)</a> </li>
			
				<li><a id="CatList_LinkList_1_Link_8" href="http://www.cnblogs.com/nexiyi/archive/2014/02.html">2014年2月 (4)</a> </li>
			
				<li><a id="CatList_LinkList_1_Link_9" href="http://www.cnblogs.com/nexiyi/archive/2013/12.html">2013年12月 (2)</a> </li>
			
				<li><a id="CatList_LinkList_1_Link_10" href="http://www.cnblogs.com/nexiyi/archive/2013/11.html">2013年11月 (5)</a> </li>
			
				<li><a id="CatList_LinkList_1_Link_11" href="http://www.cnblogs.com/nexiyi/archive/2013/10.html">2013年10月 (2)</a> </li>
			
				<li><a id="CatList_LinkList_1_Link_12" href="http://www.cnblogs.com/nexiyi/archive/2013/06.html">2013年6月 (1)</a> </li>
			
				<li><a id="CatList_LinkList_1_Link_13" href="http://www.cnblogs.com/nexiyi/archive/2013/05.html">2013年5月 (1)</a> </li>
			
				<li><a id="CatList_LinkList_1_Link_14" href="http://www.cnblogs.com/nexiyi/archive/2013/01.html">2013年1月 (7)</a> </li>
			
				<li><a id="CatList_LinkList_1_Link_15" href="http://www.cnblogs.com/nexiyi/archive/2012/12.html">2012年12月 (25)</a> </li>
			
				</ul>
			
	</div><div id="sidebar_scorerank" class="sidebar-block">
<h3>积分与排名</h3>
<ul>
	<li>
		积分 -
		106836
	</li><li>
		排名 -
		2517
	</li>
</ul>
</div><div id="sidebar_recentcomments" class="sidebar-block"><div id="recent_comments_wrap">
<h3 class="catListTitle">最新评论</h3>
<div class="RecentComment" id="RecentComments">
	<div id="RecentCommentsBlock"><ul>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/nexiyi/p/quartz_quick_start.html#3760217">1. Re:Quartz-作业调度框架</a></li>
        <li class="recent_comment_body">国产作业调度工具TASKCTL已经开源，支持各种作业容错机制和跨平台分布式调度，支持任务排程和定时调度，详情请关注：<a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html" target="_blank"></a> 了解更多。</li>
        <li class="recent_comment_author">--加菲盐</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/nexiyi/archive/2012/12/24/2831584.html#3718104">2. Re:滴水穿石--配置python光谱数据处理软件及Pydoop</a></li>
        <li class="recent_comment_body">推荐一款国内最易用光谱数据预处理软件包：平均、平滑、snv、msc、sg、遗传算法选择变量波长、支持向量机、极限学习机、神经网络、偏最小二乘回归等功能，Excel界面操作，word输出报告。。...</li>
        <li class="recent_comment_author">--gystld</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/nexiyi/archive/2013/06/16/3138568.html#3685091">3. Re:优先使用对象组合，而不是类继承</a></li>
        <li class="recent_comment_body">继承就像是老爹，强耦合，离不开<br>组合就像是小三，不爱了，就离开<br><br>解耦就靠组合(A依赖B的接口即可)</li>
        <li class="recent_comment_author">--落雨落雨</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html#3644961">4. Re:Java内存模型</a></li>
        <li class="recent_comment_body">大概看懂了，昨天去珍爱网的春招java笔试就问到了java内存模型，居然不会，哎，还有问了volatile的作用，查了下，volatile应该是声名这个变量是不稳定的，所以每次操作的时候都到主存中进行......</li>
        <li class="recent_comment_author">--众里寻他壹贰度</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html#3627587">5. Re:Java内存模型</a></li>
        <li class="recent_comment_body">怎么看看看着就没有了</li>
        <li class="recent_comment_author">--open_sesame</li>
</ul>
</div>
</div>
</div></div><div id="sidebar_topviewedposts" class="sidebar-block"><div id="topview_posts_wrap">
<h3 class="catListTitle">阅读排行榜</h3>
<div class="RecentComment" id="TopViewPosts"> 
	<div id="TopViewPostsBlock"><ul><li><a href="http://www.cnblogs.com/nexiyi/p/hbase_shell.html">1. HBase 常用Shell命令(150726)</a></li><li><a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html">2. Java内存模型(68318)</a></li><li><a href="http://www.cnblogs.com/nexiyi/p/java_thread_jstack.html">3. Java线程Dump分析工具--jstack(50442)</a></li><li><a href="http://www.cnblogs.com/nexiyi/p/hbase_intro_94.html">4. HBase介绍及简易安装(46827)</a></li><li><a href="http://www.cnblogs.com/nexiyi/p/metrics_sample_1.html">5. Metrics-Java版的指标度量工具之一(28053)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topcommentedposts" class="sidebar-block"><div id="topfeedback_posts_wrap">
<h3 class="catListTitle">评论排行榜</h3>
<div class="RecentComment" id="TopCommentsPosts">
	<div id="TopFeedbackPostsBlock"><ul><li><a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html">1. Java内存模型(12)</a></li><li><a href="http://www.cnblogs.com/nexiyi/p/hbase_shell.html">2. HBase 常用Shell命令(5)</a></li><li><a href="http://www.cnblogs.com/nexiyi/p/mondrian_hive_test.html">3. Pentaho的Mondrian对Hive的支持(3)</a></li><li><a href="http://www.cnblogs.com/nexiyi/p/java_thread_jstack.html">4. Java线程Dump分析工具--jstack(2)</a></li><li><a href="http://www.cnblogs.com/nexiyi/p/3452998.html">5. Tajo--一个分布式数据仓库系统（分布式环境安装试用）(2)</a></li></ul></div>
</div></div></div><div id="sidebar_topdiggedposts" class="sidebar-block"><div id="topdigg_posts_wrap">
<h3 class="catListTitle">推荐排行榜</h3>
<div class="RecentComment">
	<div id="TopDiggPostsBlock"><ul><li><a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html">1. Java内存模型(14)</a></li><li><a href="http://www.cnblogs.com/nexiyi/p/hbase_shell.html">2. HBase 常用Shell命令(10)</a></li><li><a href="http://www.cnblogs.com/nexiyi/p/java_thread_jstack.html">3. Java线程Dump分析工具--jstack(4)</a></li><li><a href="http://www.cnblogs.com/nexiyi/archive/2013/06/16/3138568.html">4. 优先使用对象组合，而不是类继承(3)</a></li><li><a href="http://www.cnblogs.com/nexiyi/p/3377908.html">5. TCP/IP协议详解---概述(2)</a></li></ul></div>
</div></div></div></div><script type="text/javascript">loadBlogSideColumn();</script>
	
</div>
<div id="main">
	
<div id="post_detail">
<div class="post">
	<div class="postTitle">
		<a id="cb_post_title_url" href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html">Java内存模型</a>
	</div>
	
	<div class="postText">
		<div id="cnblogs_post_body"><h2>1. 概述</h2>
<p>　　多任务和高并发是衡量一台计算机处理器的能力重要指标之一。一般衡量一个服务器性能的高低好坏，使用每秒事务处理数（Transactions Per Second，TPS）这个指标比较能说明问题，它代表着一秒内服务器平均能响应的请求数，而TPS值与程序的并发能力有着非常密切的关系。在讨论Java内存模型和线程之前，先简单介绍一下硬件的效率与一致性。</p>
<h2>2.硬件的效率与一致性</h2>
<p>　　由于计算机的存储设备与处理器的运算能力之间有几个数量级的差距，所以现代计算机系统都不得不加入一层读写速度尽可能接近处理器运算速度的高速缓存（cache）来作为内存与处理器之间的缓冲：将运算需要使用到的数据复制到缓存中，让运算能快速进行，当运算结束后再从缓存同步回内存之中没这样处理器就无需等待缓慢的内存读写了。<br>    　　基于高速缓存的存储交互很好地解决了处理器与内存的速度矛盾，但是引入了一个新的问题：缓存一致性（Cache Coherence）。在多处理器系统中，每个处理器都有自己的高速缓存，而他们又共享同一主存，如下图所示：多个处理器运算任务都涉及同一块主存，需要一种协议可以保障数据的一致性，这类协议有MSI、MESI、MOSI及Dragon Protocol等。Java虚拟机内存模型中定义的内存访问操作与硬件的缓存访问操作是具有可比性的，后续将介绍Java内存模型。</p>
<p><img src="./Java内存模型 - 残雪余香 - 博客园_files/091102484251967.jpg" alt=""></p>
<p>     　　除此之外，为了使得处理器内部的运算单元能竟可能被充分利用，处理器可能会对输入代码进行乱起执行（Out-Of-Order Execution）优化，处理器会在计算之后将对乱序执行的代码进行结果重组，保证结果准确性。与处理器的乱序执行优化类似，Java虚拟机的即时编译器中也有类似的指令重排序（Instruction Recorder）优化。</p>
<h2>3.Java内存模型</h2>
<p>　　定义Java内存模型并不是一件容易的事情，这个模型必须定义得足够严谨，才能让Java的并发操作不会产生歧义；但是，也必须得足够宽松，使得虚拟机的实现能有足够的自由空间去利用硬件的各种特性（寄存器、高速缓存等）来获取更好的执行速度。经过长时间的验证和修补，在JDK1.5发布后，Java内存模型就已经成熟和完善起来了。</p>
<h3>3.1 主内存与工作内存</h3>
<p>　　Java内存模型的主要目标是定义程序中各个变量的访问规则，即在虚拟机中将变量存储到内存和从内存中取出变量这样底层细节。此处的变量与Java编程时所说的变量不一样，指包括了实例字段、静态字段和构成数组对象的元素，但是不包括局部变量与方法参数，后者是线程私有的，不会被共享。</p>
<p>　　Java内存模型中规定了<span style="color: #ff0000;">所有的变量都存储在主内存中，每条线程还有自己的工作内存</span>（可以与前面将的处理器的高速缓存类比），线程的工作内存中保存了该线程使用到的变量到主内存副本拷贝，<span style="color: #ff0000;">线程对变量的所有操作（读取、赋值）都必须在工作内存中进行，而不能直接读写主内存中的变量</span>。不同线程之间无法直接访问对方工作内存中的变量，线程间变量值的传递均需要在主内存来完成，线程、主内存和工作内存的交互关系如下图所示，和上图很类似。</p>
<p><img src="./Java内存模型 - 残雪余香 - 博客园_files/091134177063947.jpg" alt=""></p>
<p>这里的主内存、工作内存与Java内存区域的Java堆、栈、方法区不是同一层次内存划分。</p>
<h3>3.2 内存间交互操作</h3>
<p>　　关于主内存与工作内存之间的具体交互协议，即一个变量如何从主内存拷贝到工作内存、如何从工作内存同步到主内存之间的实现细节，Java内存模型定义了以下八种操作来完成：</p>
<ul>
<li>lock（锁定）：作用于主内存的变量，把一个变量标识为一条线程独占状态。</li>
<li>unlock（解锁）：作用于主内存变量，把一个处于锁定状态的变量释放出来，释放后的变量才可以被其他线程锁定。</li>
<li>read（读取）：作用于主内存变量，把一个变量值从主内存传输到线程的工作内存中，以便随后的load动作使用</li>
<li>load（载入）：作用于工作内存的变量，它把read操作从主内存中得到的变量值放入工作内存的变量副本中。</li>
<li>use（使用）：作用于工作内存的变量，把工作内存中的一个变量值传递给执行引擎，每当虚拟机遇到一个需要使用变量的值的字节码指令时将会执行这个操作。</li>
<li>assign（赋值）：作用于工作内存的变量，它把一个从执行引擎接收到的值赋值给工作内存的变量，每当虚拟机遇到一个给变量赋值的字节码指令时执行这个操作。</li>
<li>store（存储）：作用于工作内存的变量，把工作内存中的一个变量的值传送到主内存中，以便随后的write的操作。</li>
<li>write（写入）：作用于主内存的变量，它把store操作从工作内存中一个变量的值传送到主内存的变量中。</li>




</ul>
<p>　　如果要把一个变量从主内存中复制到工作内存，就需要按顺寻地执行read和load操作，如果把变量从工作内存中同步回主内存中，就要按顺序地执行store和write操作。<span style="color: #ff0000;">Java内存模型只要求上述操作必须按顺序执行，而没有保证必须是连续执行</span>。也就是read和load之间，store和write之间是可以插入其他指令的，如对主内存中的变量a、b进行访问时，可能的顺序是read a，read b，load b， load a。Java内存模型还规定了在执行上述八种基本操作时，必须满足如下规则：</p>
<ul>
<li>不允许read和load、store和write操作之一单独出现</li>
<li>不允许一个线程丢弃它的最近assign的操作，即变量在工作内存中改变了之后必须同步到主内存中。</li>
<li>不允许一个线程无原因地（没有发生过任何assign操作）把数据从工作内存同步回主内存中。</li>
<li>一个新的变量只能在主内存中诞生，不允许在工作内存中直接使用一个未被初始化（load或assign）的变量。即就是对一个变量实施use和store操作之前，必须先执行过了assign和load操作。</li>
<li>一个变量在同一时刻只允许一条线程对其进行lock操作，lock和unlock必须成对出现</li>
<li>如果对一个变量执行lock操作，将会清空工作内存中此变量的值，在执行引擎使用这个变量前需要重新执行load或assign操作初始化变量的值</li>
<li>如果一个变量事先没有被lock操作锁定，则不允许对它执行unlock操作；也不允许去unlock一个被其他线程锁定的变量。</li>
<li>对一个变量执行unlock操作之前，必须先把此变量同步到主内存中（执行store和write操作）。</li>




</ul>
<h3>&nbsp;3.3 重排序</h3>
<p>　　在执行程序时为了提高性能，编译器和处理器经常会对指令进行重排序。重排序分成三种类型：</p>
<ol>
<li>编译器优化的重排序。编译器在不改变单线程程序语义放入前提下，可以重新安排语句的执行顺序。</li>
<li>指令级并行的重排序。现代处理器采用了指令级并行技术来将多条指令重叠执行。如果不存在数据依赖性，处理器可以改变语句对应机器指令的执行顺序。</li>
<li>内存系统的重排序。由于处理器使用缓存和读写缓冲区，这使得加载和存储操作看上去可能是在乱序执行。</li>



</ol>
<p>从Java源代码到最终实际执行的指令序列，会经过下面三种重排序：</p>
<p><img src="./Java内存模型 - 残雪余香 - 博客园_files/091511346284594.png" alt="" width="813" height="89"></p>
<p>为了保证内存的可见性，Java编译器在生成指令序列的适当位置会插入内存屏障指令来禁止特定类型的处理器重排序。Java内存模型把内存屏障分为LoadLoad、LoadStore、StoreLoad和StoreStore四种：</p>
<p><img src="./Java内存模型 - 残雪余香 - 博客园_files/091516513623330.png" alt="" width="721" height="374"></p>
<h3>3.4 同步机制</h3>
<p>介绍volatile、synchronized和final</p>
<h3>3.5 原子性、可见性与有序性</h3>
<p>介绍三个特性</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory">分类: <a href="http://www.cnblogs.com/nexiyi/category/434521.html" target="_blank">Java</a></div>
<div id="EntryTag">标签: <a href="http://www.cnblogs.com/nexiyi/tag/Java/">Java</a>, <a href="http://www.cnblogs.com/nexiyi/tag/%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/">内存模型</a>, <a href="http://www.cnblogs.com/nexiyi/tag/%E5%B9%B6%E5%8F%91/">并发</a></div>
<div id="blog_post_info"><div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(3589689,cb_blogId,1);green_channel_success(this,&#39;谢谢推荐！&#39;);">好文要顶</a>
            <a id="green_channel_follow" onclick="follow(&#39;c494465c-4e3c-e211-aa8f-842b2b196315&#39;);" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="./Java内存模型 - 残雪余香 - 博客园_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="./Java内存模型 - 残雪余香 - 博客园_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/nexiyi/" target="_blank"><img src="./Java内存模型 - 残雪余香 - 博客园_files/20150510135718.png" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/nexiyi/">残雪余香</a><br>
            <a href="http://home.cnblogs.com/u/nexiyi/followees">关注 - 15</a><br>
            <a href="http://home.cnblogs.com/u/nexiyi/followers">粉丝 - 94</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                <a href="javascript:void(0);" onclick="follow(&#39;c494465c-4e3c-e211-aa8f-842b2b196315&#39;);return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(3589689,&#39;Digg&#39;)">
        <span class="diggnum" id="digg_count">14</span>
    </div>
    <div class="buryit" onclick="votePost(3589689,&#39;Bury&#39;)">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>
</div>
<div class="clear"></div>
<div id="post_next_prev"><a href="http://www.cnblogs.com/nexiyi/p/quartz_quick_start.html" class="p_n_p_prefix">« </a> 上一篇：<a href="http://www.cnblogs.com/nexiyi/p/quartz_quick_start.html" title="发布于2014-02-26 00:45">Quartz-作业调度框架</a><br><a href="http://www.cnblogs.com/nexiyi/p/how_to_reload_properties.html" class="p_n_p_prefix">» </a> 下一篇：<a href="http://www.cnblogs.com/nexiyi/p/how_to_reload_properties.html" title="发布于2014-03-13 17:58">Java进程配置文件Reload</a><br></div>
</div>


	</div>
	
	<div class="postfoot">
		posted on <span id="post-date">2014-03-09 11:05</span> <a href="http://www.cnblogs.com/nexiyi/">残雪余香</a> 阅读(<span id="post_view_count">68322</span>) 评论(<span id="post_comment_count">12</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=3589689" rel="nofollow">编辑</a> <a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html#" onclick="AddToWz(3589689);return false;">收藏</a>
	</div>
</div>
<script type="text/javascript">var allowComments=true,cb_blogId=135566,cb_entryId=3589689,cb_blogApp=currentBlogApp,cb_blogUserGuid='c494465c-4e3c-e211-aa8f-842b2b196315',cb_entryCreatedDate='2014/3/9 11:05:00';loadViewCount(cb_entryId);</script>

</div><a name="!comments"></a><div id="blog-comments-placeholder"><div id="comments_pager_top"></div>
<a name="comments"></a>
<br>
<div id="comments">
<h3>评论</h3>


		<div class="post">			
			<div class="postTitle">
				<a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html#3315810" class="layer">#1楼</a><a name="3315810" id="comment_anchor_3315810"></a>
					<span>
						 <span class="comment_date">2015-11-27 15:53</span>
					</span>
				<a id="a_comment_author_3315810" href="http://home.cnblogs.com/u/553329/" target="_blank">and1990</a> <a href="http://msg.cnblogs.com/send/and1990" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="postText">
				<div id="comment_body_3315810" class="blog_comment_body">写的太好了，豁然开朗。楼主继续加油，3.4和3.5完结下。</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3315810,&#39;Digg&#39;,this)">支持(1)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3315810,&#39;Bury&#39;,this)">反对(0)</a></div>
			</div>
            <div class="commentOpt">
			&nbsp;&nbsp;<span class="comment_actions"></span>
            </div>
		</div>
		<br>
	
		<div class="post">			
			<div class="postTitle">
				<a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html#3329872" class="layer">#2楼</a><a name="3329872" id="comment_anchor_3329872"></a>
					<span>
						 <span class="comment_date">2015-12-18 17:07</span>
					</span>
				<a id="a_comment_author_3329872" href="http://home.cnblogs.com/u/119546/" target="_blank">技术古玩</a> <a href="http://msg.cnblogs.com/send/%E6%8A%80%E6%9C%AF%E5%8F%A4%E7%8E%A9" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="postText">
				<div id="comment_body_3329872" class="blog_comment_body">有一条表示不理解。能否帮忙解答，谢谢。<br><br>一个新的变量只能在主内存中诞生，不允许在工作内存中直接使用一个未被初始化（load或assign）的变量。<br>即就是对一个变量实施use和store操作之前，不许先执行过了assign和load操作。<br><br>我的理解“不许先执行了assign和load操作”，应该说  必须先执行过assign和load操作。<br><br>谢谢</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3329872,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3329872,&#39;Bury&#39;,this)">反对(0)</a></div>
			</div>
            <div class="commentOpt">
			&nbsp;&nbsp;<span class="comment_actions"></span>
            </div>
		</div>
		<br>
	
		<div class="post">			
			<div class="postTitle">
				<a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html#3345785" class="layer">#3楼</a><a name="3345785" id="comment_anchor_3345785"></a>[<span class="louzhu">楼主</span>]
					<span>
						 <span class="comment_date">2016-01-12 00:19</span>
					</span>
				<a id="a_comment_author_3345785" href="http://www.cnblogs.com/nexiyi/" target="_blank">残雪余香</a> <a href="http://msg.cnblogs.com/send/%E6%AE%8B%E9%9B%AA%E4%BD%99%E9%A6%99" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="postText">
				<div id="comment_body_3345785" class="blog_comment_body"><a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html#3329872" title="查看所回复的评论" onclick="commentManager.renderComments(0,50,3329872);">@</a>
技术古玩<br>笔误，谢谢提醒，应该是“必须”，已更正。</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3345785,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3345785,&#39;Bury&#39;,this)">反对(0)</a></div><span id="comment_3345785_avatar" style="display:none;">http://pic.cnblogs.com/face/475287/20150510135718.png</span>
			</div>
            <div class="commentOpt">
			&nbsp;&nbsp;<span class="comment_actions"></span>
            </div>
		</div>
		<br>
	
		<div class="post">			
			<div class="postTitle">
				<a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html#3367785" class="layer">#4楼</a><a name="3367785" id="comment_anchor_3367785"></a>
					<span>
						 <span class="comment_date">2016-02-27 15:30</span>
					</span>
				<a id="a_comment_author_3367785" href="http://www.cnblogs.com/rembau/" target="_blank">rembau</a> <a href="http://msg.cnblogs.com/send/rembau" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="postText">
				<div id="comment_body_3367785" class="blog_comment_body">除此之外，为了使得处理器内部的运算单元能竟可能被充分利用，处理器可能会对输入代码进行乱起执行（Out-Of-Order Execution）优化<br><br>其中“乱其执行”，应该更改为“乱序执行”。</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3367785,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3367785,&#39;Bury&#39;,this)">反对(0)</a></div>
			</div>
            <div class="commentOpt">
			&nbsp;&nbsp;<span class="comment_actions"></span>
            </div>
		</div>
		<br>
	
		<div class="post">			
			<div class="postTitle">
				<a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html#3367786" class="layer">#5楼</a><a name="3367786" id="comment_anchor_3367786"></a>
					<span>
						 <span class="comment_date">2016-02-27 15:32</span>
					</span>
				<a id="a_comment_author_3367786" href="http://www.cnblogs.com/rembau/" target="_blank">rembau</a> <a href="http://msg.cnblogs.com/send/rembau" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="postText">
				<div id="comment_body_3367786" class="blog_comment_body">指令重排序（Instruction Recorder）优化<br><br>Recorder应该改为reorder.</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3367786,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3367786,&#39;Bury&#39;,this)">反对(0)</a></div>
			</div>
            <div class="commentOpt">
			&nbsp;&nbsp;<span class="comment_actions"></span>
            </div>
		</div>
		<br>
	
		<div class="post">			
			<div class="postTitle">
				<a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html#3464863" class="layer">#6楼</a><a name="3464863" id="comment_anchor_3464863"></a>
					<span>
						 <span class="comment_date">2016-07-06 14:40</span>
					</span>
				<a id="a_comment_author_3464863" href="http://home.cnblogs.com/u/706616/" target="_blank">tommyarron</a> <a href="http://msg.cnblogs.com/send/tommyarron" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="postText">
				<div id="comment_body_3464863" class="blog_comment_body">写得真好，期待继续3.4 和 3.5</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3464863,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3464863,&#39;Bury&#39;,this)">反对(0)</a></div>
			</div>
            <div class="commentOpt">
			&nbsp;&nbsp;<span class="comment_actions"></span>
            </div>
		</div>
		<br>
	
		<div class="post">			
			<div class="postTitle">
				<a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html#3499602" class="layer">#7楼</a><a name="3499602" id="comment_anchor_3499602"></a>
					<span>
						 <span class="comment_date">2016-08-30 15:23</span>
					</span>
				<a id="a_comment_author_3499602" href="http://home.cnblogs.com/u/1017737/" target="_blank">有点无聊</a> <a href="http://msg.cnblogs.com/send/%E6%9C%89%E7%82%B9%E6%97%A0%E8%81%8A" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="postText">
				<div id="comment_body_3499602" class="blog_comment_body">谢谢分享  学习了</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3499602,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3499602,&#39;Bury&#39;,this)">反对(0)</a></div>
			</div>
            <div class="commentOpt">
			&nbsp;&nbsp;<span class="comment_actions"></span>
            </div>
		</div>
		<br>
	
		<div class="post">			
			<div class="postTitle">
				<a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html#3507490" class="layer">#8楼</a><a name="3507490" id="comment_anchor_3507490"></a>
					<span>
						 <span class="comment_date">2016-09-10 15:40</span>
					</span>
				<a id="a_comment_author_3507490" href="http://www.cnblogs.com/xdouby/" target="_blank">小杜比亚</a> <a href="http://msg.cnblogs.com/send/%E5%B0%8F%E6%9D%9C%E6%AF%94%E4%BA%9A" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="postText">
				<div id="comment_body_3507490" class="blog_comment_body">谢谢分享，我转载一下哈</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3507490,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3507490,&#39;Bury&#39;,this)">反对(0)</a></div><span id="comment_3507490_avatar" style="display:none;">http://pic.cnblogs.com/face/991670/20160713125642.png</span>
			</div>
            <div class="commentOpt">
			&nbsp;&nbsp;<span class="comment_actions"></span>
            </div>
		</div>
		<br>
	
		<div class="post">			
			<div class="postTitle">
				<a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html#3544369" class="layer">#9楼</a><a name="3544369" id="comment_anchor_3544369"></a>
					<span>
						 <span class="comment_date">2016-10-30 23:28</span>
					</span>
				<a id="a_comment_author_3544369" href="http://www.cnblogs.com/heyus/" target="_blank">safetys</a> <a href="http://msg.cnblogs.com/send/safetys" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="postText">
				<div id="comment_body_3544369" class="blog_comment_body">厉害了我的哥。。。</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3544369,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3544369,&#39;Bury&#39;,this)">反对(0)</a></div>
			</div>
            <div class="commentOpt">
			&nbsp;&nbsp;<span class="comment_actions"></span>
            </div>
		</div>
		<br>
	
		<div class="post">			
			<div class="postTitle">
				<a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html#3548815" class="layer">#10楼</a><a name="3548815" id="comment_anchor_3548815"></a>
					<span>
						 <span class="comment_date">2016-11-05 13:33</span>
					</span>
				<a id="a_comment_author_3548815" href="http://home.cnblogs.com/u/1057656/" target="_blank">技术小菜鸟80后</a> <a href="http://msg.cnblogs.com/send/%E6%8A%80%E6%9C%AF%E5%B0%8F%E8%8F%9C%E9%B8%9F80%E5%90%8E" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="postText">
				<div id="comment_body_3548815" class="blog_comment_body">大神，我有些不明白<br>Java内存模型中规定了所有的变量都存储在主内存中，每条线程还有自己的工作内存这句话<br>假设我有一个线程ThreadTest继承了Thread,线程有一个string的变量a<br>public static void main(string[] args){<br>     Thread thread = new ThreadTest(); //这句话假设为变量a赋值为abc<br>     thread.run();  //run方法后线程值改变为bbb<br>}<br><br>主线程 －－－－－ 工作内存 －－－－－主内存<br>ThreadTest线程－ 工作内存 －－－－－主内存                <br>问题：<br>这个变量a会保存在哪里？如果是主内存，他是怎么过去的？</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3548815,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3548815,&#39;Bury&#39;,this)">反对(0)</a></div>
			</div>
            <div class="commentOpt">
			&nbsp;&nbsp;<span class="comment_actions"></span>
            </div>
		</div>
		<br>
	
		<div class="post">			
			<div class="postTitle">
				<a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html#3627587" class="layer">#11楼</a><a name="3627587" id="comment_anchor_3627587"></a>
					<span>
						 <span class="comment_date">2017-02-27 15:58</span>
					</span>
				<a id="a_comment_author_3627587" href="http://www.cnblogs.com/opensesame/" target="_blank">open_sesame</a> <a href="http://msg.cnblogs.com/send/open_sesame" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="postText">
				<div id="comment_body_3627587" class="blog_comment_body">怎么看看看着就没有了</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3627587,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3627587,&#39;Bury&#39;,this)">反对(0)</a></div><span id="comment_3627587_avatar" style="display:none;">http://pic.cnblogs.com/face/1000039/20160801123628.png</span>
			</div>
            <div class="commentOpt">
			&nbsp;&nbsp;<span class="comment_actions"></span>
            </div>
		</div>
		<br>
	
		<div class="post">			
			<div class="postTitle">
				<a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html#3644961" class="layer">#12楼</a><a name="3644961" id="comment_anchor_3644961"></a><span id="comment-maxId" style="display:none;">3644961</span><span id="comment-maxDate" style="display:none;">2017/3/19 16:20:04</span>
					<span>
						 <span class="comment_date">2017-03-19 16:20</span>
					</span>
				<a id="a_comment_author_3644961" href="http://www.cnblogs.com/ChanSS/" target="_blank">众里寻他壹贰度</a> <a href="http://msg.cnblogs.com/send/%E4%BC%97%E9%87%8C%E5%AF%BB%E4%BB%96%E5%A3%B9%E8%B4%B0%E5%BA%A6" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="postText">
				<div id="comment_body_3644961" class="blog_comment_body">大概看懂了，昨天去珍爱网的春招java笔试就问到了java内存模型，居然不会，哎，还有问了volatile的作用，查了下，volatile应该是声名这个变量是不稳定的，所以每次操作的时候都到主存中进行读取，而不是到工作内存中读取。因为有缓存的原因，所以有可能一个线程改变了一个变量，而同时另一个线程从自己的工作内存中读取，导致数据不一致</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3644961,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3644961,&#39;Bury&#39;,this)">反对(0)</a></div>
			</div>
            <div class="commentOpt">
			&nbsp;&nbsp;<span class="comment_actions"></span>
            </div>
		</div>
		<br>
	
</div><div id="comments_pager_bottom"></div></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html#" onclick="return RefreshPage();">刷新页面</a><a href="http://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html#top">返回顶部</a></div>
<div id="comment_form_container"><div class="login_tips">注册用户登录后才能发表评论，请 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return login(&#39;commentform&#39;);">登录</a> 或 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return register();">注册</a>，<a href="http://www.cnblogs.com/">访问</a>网站首页。</div></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"><a href="http://www.ucancode.com/index.htm" target="_blank">【推荐】50万行VC++源码: 大型组态工控、电力仿真CAD与GIS源码库</a><br><a href="https://cloud.tencent.com/act/free?fromSource=gwzcw.436817.436817.436817" target="_blank">【力荐】普惠云计算 0门槛体验 30+云产品免费半年</a><br><a href="http://www.gcpowertools.com.cn/products/spreadjs/?utm_source=cnblogs&amp;utm_medium=blogpage&amp;utm_term=bottom&amp;utm_content=SpreadJS&amp;utm_campaign=community" target="_blank">【推荐】可嵌入您系统的“在线Excel”！SpreadJS 纯前端表格控件</a><br><a href="http://click.aliyun.com/m/18488/" target="_blank">【推荐】阿里云“全民云计算”优惠升级</a><br></div>
<div id="opt_under_post"></div>
<div id="cnblogs_c1" class="c_ad_block"><a href="http://click.aliyun.com/m/26126/" target="_blank"><img width="300" height="250" src="./Java内存模型 - 残雪余香 - 博客园_files/24442-20170830182528765-2055545967.png" alt="阿里云0830"></a></div>
<div id="under_post_news"><div class="itnews c_ad_block"><b>最新IT新闻</b>:<br> ·  <a href="http://news.cnblogs.com/n/577657/" target="_blank">MIUI宣布停止维护“小米黄页” 仅保留基础服务</a><br> ·  <a href="http://news.cnblogs.com/n/577674/" target="_blank">万达正式起诉至少10个微博微信公号传谣 分别索赔500万元</a><br> ·  <a href="http://news.cnblogs.com/n/577673/" target="_blank">李笑来：一个诈骗者的财富自由之路</a><br> ·  <a href="http://news.cnblogs.com/n/577672/" target="_blank">华为5G试验再次刷新纪录 低频峰值速率超20Gbit/s</a><br> ·  <a href="http://news.cnblogs.com/n/577671/" target="_blank">阿北12年慢跑之后 豆瓣还能快起来吗?</a><br>» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></div></div>
<div id="cnblogs_c2" class="c_ad_block"><a href="https://www.jiguang.cn/devservice?source=bky&amp;hmsr=%E5%8D%9A%E5%AE%A2%E5%9B%AD&amp;hmpl=&amp;hmcu=&amp;hmkw=&amp;hmci=" target="_blank"><img width="468" height="60" src="./Java内存模型 - 残雪余香 - 博客园_files/24442-20170901112708499-388259391.gif" alt="极光0901"></a></div>
<div id="under_post_kb"><div class="itnews c_ad_block" id="kb_block"><b>最新知识库文章</b>:<br><div id="kb_recent"> ·  <a href="http://kb.cnblogs.com/page/575829/" target="_blank">做到这一点，你也可以成为优秀的程序员</a><br> ·  <a href="http://kb.cnblogs.com/page/566880/" target="_blank">写给立志做码农的大学生</a><br> ·  <a href="http://kb.cnblogs.com/page/569057/" target="_blank">架构腐化之谜</a><br> ·  <a href="http://kb.cnblogs.com/page/572854/" target="_blank">学会思考，而不只是编程</a><br> ·  <a href="http://kb.cnblogs.com/page/574767/" target="_blank">编写Shell脚本的最佳实践</a><br></div>» <a href="http://kb.cnblogs.com/" target="_blank">更多知识库文章...</a></div></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverAdT2();
    deliverAdC1();
    deliverAdC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);   
</script>
</div>


</div>
<div class="footer">

<p id="footer">
	Powered by: 
	<br>
	
	<a id="Footer1_Hyperlink3" name="Hyperlink1" href="http://www.cnblogs.com/" style="font-family:Verdana;font-size:12px;">博客园</a>
	<br>
	Copyright © 残雪余香
</p>
</div>


</body></html>