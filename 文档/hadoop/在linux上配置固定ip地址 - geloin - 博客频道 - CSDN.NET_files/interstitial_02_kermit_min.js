var k,l=this,r=function(a){return void 0!==a},aa=function(a){a=a.split(".");for(var b=l,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b},ba=function(){},ca=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";
if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b},da=function(a){return"array"==ca(a)},ea=function(a){var b=ca(a);return"array"==b||"object"==b&&"number"==typeof a.length},t=function(a){return"string"==typeof a},fa=function(a){return"number"==typeof a},ga=function(a){return"function"==ca(a)},ha=function(a){var b=
typeof a;return"object"==b&&null!=a||"function"==b},ia=function(a,b,c){return a.call.apply(a.bind,arguments)},ja=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}},w=function(a,b,c){w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ia:ja;return w.apply(null,
arguments)},ka=Date.now||function(){return+new Date},x=function(a,b){var c=a.split("."),d=l;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&r(b)?d[e]=b:d=d[e]?d[e]:d[e]={}},y=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(a,c,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[c].apply(a,g)}};var la={AUTO_CYCLE:"autocycle",AUTO_CYCLE_FINISH:"autocyclefinish",DYNAMIC_FIT_COMPLETE:"dynamicfitcomplete",FIT_DYNAMIC_ELEMENTS:"fitdynamicelements",FIT_IMAGE:"fitimage",FIT_LOGO:"fitlogo",FIT_TEXT:"fittext",FONT_STATUS_ERROR:"fontstatuserror",FONT_STATUS_LOADING:"fontstatusloading",FONT_STATUS_SUCCESS:"fontstatussuccess",FONT_LOAD_INIT:"fontloadinit",FONT_LOAD_SUCCESS:"fontloadsuccess",FONT_LOAD_ERROR:"fontloaderror",IMAGE_FIT_COMPLETE:"imagefitcomplete",IMAGE_LOAD_COMPLETE:"imageloadcomplete",
IMAGE_LOAD_ERROR:"imageloaderror",IMAGE_LOAD_TIMEOUT:"imageloadtimeout",ITEM_INTERACTION_OVER:"iteminteractionover",ITEM_INTERACTION_LEAVE:"iteminteractionleave",LAYOUT_PARSING_DATA:"layoutparsingdata",LAYOUT_PRELOADING:"layoutpreloading",LAYOUT_READY:"layoutready",LAYOUT_SCALING_ASSETS:"layoutscalingassets",LOGO_FIT_COMPLETE:"logofitcomplete",PRELOAD_COMPLETE:"preloadcomplete",PRELOAD_LOAD_ERROR:"preloadloaderor",PRELOAD_TIMEOUT_ERROR:"preloadtimeouterror",REDRAW_SALE_BADGE:"redrawsalebadge",TEXT_FIT_COMPLETE:"textfitcomplete"};var ma=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ma);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};y(ma,Error);ma.prototype.name="CustomError";var na;var oa=function(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")},pa=function(a){return/^[\s\xa0]*$/.test(a)},qa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},za=function(a){if(!ra.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(sa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(ua,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(va,"&gt;"));-1!=a.indexOf('"')&&
(a=a.replace(wa,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(xa,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(ya,"&#0;"));return a},sa=/&/g,ua=/</g,va=/>/g,wa=/"/g,xa=/'/g,ya=/\x00/g,ra=/[\x00&<>"']/,Aa=function(a){return Array.prototype.join.call(arguments,"")},Ba=function(a,b){return a<b?-1:a>b?1:0},Ca=function(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})},Da=function(a){var b=t(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,
"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};var Ea=function(a,b){b.unshift(a);ma.call(this,oa.apply(null,b));b.shift()};y(Ea,ma);Ea.prototype.name="AssertionError";var A=function(a,b,c){if(!a){var d="Assertion failed";if(b)var d=d+(": "+b),e=Array.prototype.slice.call(arguments,2);throw new Ea(""+d,e||[]);}},Fa=function(a,b){throw new Ea("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var B=Array.prototype,Ga=B.indexOf?function(a,b,c){A(null!=a.length);return B.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(t(a))return t(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ha=B.forEach?function(a,b,c){A(null!=a.length);B.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=t(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ia=B.filter?function(a,b,c){A(null!=a.length);return B.filter.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=t(a)?a.split(""):a,h=0;h<d;h++)if(h in g){var m=g[h];b.call(c,m,h,a)&&(e[f++]=m)}return e},Ja=function(a){return B.concat.apply(B,arguments)},Ka=function(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]},Pa=function(a,b,c,d){A(null!=a.length);B.splice.apply(a,La(arguments,1))},La=function(a,b,c){A(null!=a.length);return 2>=arguments.length?B.slice.call(a,b):B.slice.call(a,b,c)};var Qa=function(a,b,c){for(var d in a)b.call(c,a[d],d,a)},Ra=function(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1},Sa=function(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b},Ta=function(a){for(var b in a)return!1;return!0},Ua=function(a,b,c){return b in a?a[b]:a[b]=c},Va="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Wa=function(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=
0;f<Va.length;f++)c=Va[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Xa=function(a,b){this.x=r(a)?a:0;this.y=r(b)?b:0};k=Xa.prototype;k.clone=function(){return new Xa(this.x,this.y)};k.toString=function(){return"("+this.x+", "+this.y+")"};k.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};k.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};k.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
k.translate=function(a,b){a instanceof Xa?(this.x+=a.x,this.y+=a.y):(this.x+=a,fa(b)&&(this.y+=b));return this};k.scale=function(a,b){var c=fa(b)?b:a;this.x*=a;this.y*=c;return this};var Ya=function(a,b){this.width=a;this.height=b};k=Ya.prototype;k.clone=function(){return new Ya(this.width,this.height)};k.toString=function(){return"("+this.width+" x "+this.height+")"};k.isEmpty=function(){return!(this.width*this.height)};k.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};k.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
k.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};k.scale=function(a,b){var c=fa(b)?b:a;this.width*=a;this.height*=c;return this};var C;a:{var Za=l.navigator;if(Za){var $a=Za.userAgent;if($a){C=$a;break a}}C=""};var ab=-1!=C.indexOf("Opera")||-1!=C.indexOf("OPR"),D=-1!=C.indexOf("Trident")||-1!=C.indexOf("MSIE"),bb=-1!=C.indexOf("Edge"),cb=-1!=C.indexOf("Gecko")&&!(-1!=C.toLowerCase().indexOf("webkit")&&-1==C.indexOf("Edge"))&&!(-1!=C.indexOf("Trident")||-1!=C.indexOf("MSIE"))&&-1==C.indexOf("Edge"),db=-1!=C.toLowerCase().indexOf("webkit")&&-1==C.indexOf("Edge"),eb=function(){var a=C;if(cb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(bb)return/Edge\/([\d\.]+)/.exec(a);if(D)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);
if(db)return/WebKit\/(\S+)/.exec(a)},fb=function(){var a=l.document;return a?a.documentMode:void 0},gb=function(){if(ab&&l.opera){var a=l.opera.version;return ga(a)?a():a}var a="",b=eb();b&&(a=b?b[1]:"");return D&&(b=fb(),b>parseFloat(a))?String(b):a}(),hb={},E=function(a){var b;if(!(b=hb[a])){b=0;for(var c=qa(String(gb)).split("."),d=qa(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",m=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var p=
m.exec(g)||["","",""],q=n.exec(h)||["","",""];if(0==p[0].length&&0==q[0].length)break;b=Ba(0==p[1].length?0:parseInt(p[1],10),0==q[1].length?0:parseInt(q[1],10))||Ba(0==p[2].length,0==q[2].length)||Ba(p[2],q[2])}while(0==b)}b=hb[a]=0<=b}return b},ib=l.document,jb=ib&&D?fb()||("CSS1Compat"==ib.compatMode?parseInt(gb,10):5):void 0;var kb=!D||9<=jb,lb=!cb&&!D||D&&9<=jb||cb&&E("1.9.1"),mb=D&&!E("9"),nb=D||ab||db;var ob=function(a){var b=document;return t(a)?b.getElementById(a):a},qb=function(a,b){Qa(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:pb.hasOwnProperty(d)?a.setAttribute(pb[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})},pb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",
valign:"vAlign",width:"width"},sb=function(a,b,c){return rb(document,arguments)},rb=function(a,b){var c=b[0],d=b[1];if(!kb&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',za(d.name),'"');if(d.type){c.push(' type="',za(d.type),'"');var e={};Wa(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(t(d)?c.className=d:da(d)?c.className=d.join(" "):qb(c,d));2<b.length&&tb(a,c,b,2);return c},tb=function(a,b,c,d){function e(c){c&&b.appendChild(t(c)?a.createTextNode(c):c)}for(;d<
c.length;d++){var f=c[d];if(!ea(f)||ha(f)&&0<f.nodeType)e(f);else{var g;a:{if(f&&"number"==typeof f.length){if(ha(f)){g="function"==typeof f.item||"string"==typeof f.item;break a}if(ga(f)){g="function"==typeof f.item;break a}}g=!1}Ha(g?Ka(f):f,e)}}},vb=function(a,b){tb(ub(a),a,arguments,1)},wb=function(a){for(var b;b=a.firstChild;)a.removeChild(b)},xb=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null},yb=function(a){return ha(a)&&1==a.nodeType},ub=function(a){A(a,"Node cannot be null or undefined.");
return 9==a.nodeType?a:a.ownerDocument||a.document},zb=function(a,b){A(null!=a,"goog.dom.setTextContent expects a non-null value for node");if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{wb(a);var c=ub(a);a.appendChild(c.createTextNode(String(b)))}},Ab={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Bb={IMG:" ",BR:"\n"},Db=function(a){if(mb&&"innerText"in
a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];Cb(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");mb||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a},Cb=function(a,b,c){if(!(a.nodeName in Ab))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in Bb)b.push(Bb[a.nodeName]);else for(a=a.firstChild;a;)Cb(a,b,c),a=a.nextSibling},Eb=function(a){this.document_=a||
l.document||document};k=Eb.prototype;k.createDom=function(a,b,c){return rb(this.document_,arguments)};k.createElement=function(a){return this.document_.createElement(a)};k.createTextNode=function(a){return this.document_.createTextNode(String(a))};k.appendChild=function(a,b){a.appendChild(b)};k.append=vb;k.canHaveChildren=function(a){if(1!=a.nodeType)return!1;switch(a.tagName){case "APPLET":case "AREA":case "BASE":case "BR":case "COL":case "COMMAND":case "EMBED":case "FRAME":case "HR":case "IMG":case "INPUT":case "IFRAME":case "ISINDEX":case "KEYGEN":case "LINK":case "NOFRAMES":case "NOSCRIPT":case "META":case "OBJECT":case "PARAM":case "SCRIPT":case "SOURCE":case "STYLE":case "TRACK":case "WBR":return!1}return!0};
k.removeNode=xb;k.getChildren=function(a){return lb&&void 0!=a.children?a.children:Ia(a.childNodes,function(a){return 1==a.nodeType})};k.isElement=yb;k.contains=function(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};var Fb=function(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d};k=Fb.prototype;k.clone=function(){return new Fb(this.top,this.right,this.bottom,this.left)};k.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};k.contains=function(a){return this&&a?a instanceof Fb?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
k.expand=function(a,b,c,d){ha(a)?(this.top-=a.top,this.right+=a.right,this.bottom+=a.bottom,this.left-=a.left):(this.top-=a,this.right+=b,this.bottom+=c,this.left-=d);return this};k.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};k.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};
k.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};k.translate=function(a,b){a instanceof Xa?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,fa(b)&&(this.top+=b,this.bottom+=b));return this};k.scale=function(a,b){var c=fa(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};var F=function(a,b,c){if(t(b))(b=Gb(a,b))&&(a.style[b]=c);else for(var d in b){c=a;var e=b[d],f=Gb(c,d);f&&(c.style[f]=e)}},Hb={},Gb=function(a,b){var c=Hb[b];if(!c){var d=Ca(b),c=d;void 0===a.style[d]&&(d=(db?"Webkit":cb?"Moz":D?"ms":ab?"O":null)+Da(d),void 0!==a.style[d]&&(c=d));Hb[b]=c}return c},G=function(a,b){var c=ub(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""},Ib=function(a,b){if(/^\d+px?$/.test(b))return parseInt(b,
10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e},Jb=function(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Ib(a,c):0},Kb={thin:2,medium:4,thick:6},Lb=function(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in Kb?Kb[c]:Ib(a,c)};var Mb=function(){};x("gpa.layouts.common.service.AnimationItem",Mb);Mb.prototype.getEnabledItemsCount=function(){for(var a=document.querySelectorAll("[gpa-animation-item]"),b=a.length,c=0,d=0;a[d];d++)"none"==G(a[d],"display")&&c++;return b-c};Mb.prototype.getEnabledItemsCount=Mb.prototype.getEnabledItemsCount;var Nb=angular.module("gpa.layouts.common.module.service.animationItem",[]).service("animationItem",Mb);x("gpa.layouts.common.module.service.animationItem",Nb);var Ob={ABLE:"able",MAIN:"main"};var Pb=function(a,b,c){this.rootScope=a;this.scope=b;this.animationItem_=c;this.init_()};x("gpa.layouts.common.controller.AnimationItemCtrl",Pb);Pb.$inject=["$rootScope","$scope","animationItem"];Pb.prototype.init_=function(){this.rootScope.$on("layoutready",w(this.readyHandler_,this))};Pb.prototype.readyHandler_=function(){var a="";Qa(Ob,function(b){r(this.scope[b])&&(a=b)},this);this.scope[a].itemsLimit=this.animationItem_.getEnabledItemsCount()};
var Qb=angular.module("gpa.layouts.common.module.controller.animationItemController",[Nb.name]).controller("AnimationItemCtrl",Pb);x("gpa.layouts.common.module.controller.animationItemController",Qb);var Rb=function(a){Rb[" "](a);return a};Rb[" "]=ba;var Sb=!D||9<=jb,Tb=D&&!E("9");!db||E("528");cb&&E("1.9b")||D&&E("8")||ab&&E("9.5")||db&&E("528");cb&&!E("8")||D&&E("9");var Ub=function(){this.disposed_=this.disposed_;this.onDisposeCallbacks_=this.onDisposeCallbacks_};Ub.prototype.disposed_=!1;Ub.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())};Ub.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()};var H=function(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.propagationStopped_=!1;this.returnValue_=!0};H.prototype.stopPropagation=function(){this.propagationStopped_=!0};H.prototype.preventDefault=function(){this.defaultPrevented=!0;this.returnValue_=!1};var Vb=function(a,b){H.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.event_=this.state=null;a&&this.init(a,b)};y(Vb,H);
Vb.prototype.init=function(a,b){var c=this.type=a.type,d=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;var e=a.relatedTarget;if(e){if(cb){var f;a:{try{Rb(e.nodeName);f=!0;break a}catch(g){}f=!1}f||(e=null)}}else"mouseover"==c?e=a.fromElement:"mouseout"==c&&(e=a.toElement);this.relatedTarget=e;null===d?(this.offsetX=db||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=db||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:
a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.event_=a;a.defaultPrevented&&
this.preventDefault()};Vb.prototype.stopPropagation=function(){Vb.superClass_.stopPropagation.call(this);this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0};Vb.prototype.preventDefault=function(){Vb.superClass_.preventDefault.call(this);var a=this.event_;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Tb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Wb="closure_listenable_"+(1E6*Math.random()|0),Xb=function(a){return!(!a||!a[Wb])},Yb=0;var Zb=function(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.handler=e;this.key=++Yb;this.removed=this.callOnce=!1},$b=function(a){a.removed=!0;a.listener=null;a.proxy=null;a.src=null;a.handler=null};var ac=function(a){this.src=a;this.listeners={};this.typeCount_=0};ac.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.listeners[f];a||(a=this.listeners[f]=[],this.typeCount_++);var g=bc(a,b,d,e);-1<g?(b=a[g],c||(b.callOnce=!1)):(b=new Zb(b,this.src,f,!!d,e),b.callOnce=c,a.push(b));return b};
ac.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.listeners))return!1;var e=this.listeners[a];b=bc(e,b,c,d);return-1<b?($b(e[b]),A(null!=e.length),B.splice.call(e,b,1),0==e.length&&(delete this.listeners[a],this.typeCount_--),!0):!1};var cc=function(a,b){var c=b.type;if(!(c in a.listeners))return!1;var d=a.listeners[c],e=Ga(d,b),f;if(f=0<=e)A(null!=d.length),B.splice.call(d,e,1);f&&($b(b),0==a.listeners[c].length&&(delete a.listeners[c],a.typeCount_--));return f};
ac.prototype.removeAll=function(a){a=a&&a.toString();var b=0,c;for(c in this.listeners)if(!a||c==a){for(var d=this.listeners[c],e=0;e<d.length;e++)++b,$b(d[e]);delete this.listeners[c];this.typeCount_--}return b};ac.prototype.getListener=function(a,b,c,d){a=this.listeners[a.toString()];var e=-1;a&&(e=bc(a,b,c,d));return-1<e?a[e]:null};
ac.prototype.hasListener=function(a,b){var c=r(a),d=c?a.toString():"",e=r(b);return Ra(this.listeners,function(a){for(var g=0;g<a.length;++g)if(!(c&&a[g].type!=d||e&&a[g].capture!=b))return!0;return!1})};var bc=function(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.removed&&f.listener==b&&f.capture==!!c&&f.handler==d)return e}return-1};var dc="closure_lm_"+(1E6*Math.random()|0),ec={},fc=0,I=function(a,b,c,d,e){if(da(b)){for(var f=0;f<b.length;f++)I(a,b[f],c,d,e);return null}c=gc(c);if(Xb(a))a=a.listen(b,c,d,e);else{if(!b)throw Error("Invalid event type");var f=!!d,g=hc(a);g||(a[dc]=g=new ac(a));c=g.add(b,c,!1,d,e);if(!c.proxy){d=jc();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)a.addEventListener(b.toString(),d,f);else if(a.attachEvent)a.attachEvent(kc(b.toString()),d);else throw Error("addEventListener and attachEvent are unavailable.");
fc++}a=c}return a},jc=function(){var a=lc,b=Sb?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b},mc=function(a,b,c,d,e){if(da(b))for(var f=0;f<b.length;f++)mc(a,b[f],c,d,e);else c=gc(c),Xb(a)?a.unlisten(b,c,d,e):a&&(a=hc(a))&&(b=a.getListener(b,c,!!d,e))&&nc(b)},nc=function(a){if(fa(a)||!a||a.removed)return!1;var b=a.src;if(Xb(b))return cc(b.eventTargetListeners_,a);var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,
d,a.capture):b.detachEvent&&b.detachEvent(kc(c),d);fc--;(c=hc(b))?(cc(c,a),0==c.typeCount_&&(c.src=null,b[dc]=null)):$b(a);return!0},oc=function(a){if(a)if(Xb(a))a.eventTargetListeners_&&a.eventTargetListeners_.removeAll(void 0);else if(a=hc(a)){var b=0,c;for(c in a.listeners)for(var d=a.listeners[c].concat(),e=0;e<d.length;++e)nc(d[e])&&++b}},kc=function(a){return a in ec?ec[a]:ec[a]="on"+a},qc=function(a,b,c,d){var e=!0;if(a=hc(a))if(b=a.listeners[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=
b[a];f&&f.capture==c&&!f.removed&&(f=pc(f,d),e=e&&!1!==f)}return e},pc=function(a,b){var c=a.listener,d=a.handler||a.src;a.callOnce&&nc(a);return c.call(d,b)},rc=function(a,b){A(Xb(a),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance.");a.dispatchEvent(b)},lc=function(a,b){if(a.removed)return!0;if(!Sb){var c=b||aa("window.event"),d=new Vb(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var f=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(g){f=!0}if(f||void 0==
c.returnValue)c.returnValue=!0}c=[];for(f=d.currentTarget;f;f=f.parentNode)c.push(f);for(var f=a.type,h=c.length-1;!d.propagationStopped_&&0<=h;h--){d.currentTarget=c[h];var m=qc(c[h],f,!0,d),e=e&&m}for(h=0;!d.propagationStopped_&&h<c.length;h++)d.currentTarget=c[h],m=qc(c[h],f,!1,d),e=e&&m}return e}return pc(a,new Vb(b,this))},hc=function(a){a=a[dc];return a instanceof ac?a:null},sc="__closure_events_fn_"+(1E9*Math.random()>>>0),gc=function(a){A(a,"Listener can not be null.");if(ga(a))return a;A(a.handleEvent,
"An object listener must have handleEvent method.");a[sc]||(a[sc]=function(b){return a.handleEvent(b)});return a[sc]};var J=function(){Ub.call(this);this.eventTargetListeners_=new ac(this);this.actualEventTarget_=this;this.parentEventTarget_=null};y(J,Ub);J.prototype[Wb]=!0;k=J.prototype;k.addEventListener=function(a,b,c,d){I(this,a,b,c,d)};k.removeEventListener=function(a,b,c,d){mc(this,a,b,c,d)};
k.dispatchEvent=function(a){tc(this);var b,c=this.parentEventTarget_;if(c){b=[];for(var d=1;c;c=c.parentEventTarget_)b.push(c),A(1E3>++d,"infinite loop")}c=this.actualEventTarget_;d=a.type||a;if(t(a))a=new H(a,c);else if(a instanceof H)a.target=a.target||c;else{var e=a;a=new H(d,c);Wa(a,e)}var e=!0,f;if(b)for(var g=b.length-1;!a.propagationStopped_&&0<=g;g--)f=a.currentTarget=b[g],e=uc(f,d,!0,a)&&e;a.propagationStopped_||(f=a.currentTarget=c,e=uc(f,d,!0,a)&&e,a.propagationStopped_||(e=uc(f,d,!1,a)&&
e));if(b)for(g=0;!a.propagationStopped_&&g<b.length;g++)f=a.currentTarget=b[g],e=uc(f,d,!1,a)&&e;return e};k.disposeInternal=function(){J.superClass_.disposeInternal.call(this);this.eventTargetListeners_&&this.eventTargetListeners_.removeAll(void 0);this.parentEventTarget_=null};k.listen=function(a,b,c,d){tc(this);return this.eventTargetListeners_.add(String(a),b,!1,c,d)};k.unlisten=function(a,b,c,d){return this.eventTargetListeners_.remove(String(a),b,c,d)};
var uc=function(a,b,c,d){b=a.eventTargetListeners_.listeners[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.removed&&g.capture==c){var h=g.listener,m=g.handler||g.src;g.callOnce&&cc(a.eventTargetListeners_,g);e=!1!==h.call(m,d)&&e}}return e&&0!=d.returnValue_};J.prototype.getListener=function(a,b,c,d){return this.eventTargetListeners_.getListener(String(a),b,c,d)};
J.prototype.hasListener=function(a,b){return this.eventTargetListeners_.hasListener(r(a)?String(a):void 0,b)};var tc=function(a){A(a.eventTargetListeners_,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")};var vc=function(a,b){J.call(this);this.interval_=a||1;this.timerObject_=b||l;this.boundTick_=w(this.tick_,this);this.last_=ka()};y(vc,J);k=vc.prototype;k.enabled=!1;k.timer_=null;k.setInterval=function(a){this.interval_=a;this.timer_&&this.enabled?(this.stop(),this.start()):this.timer_&&this.stop()};
k.tick_=function(){if(this.enabled){var a=ka()-this.last_;0<a&&a<.8*this.interval_?this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_-a):(this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null),this.dispatchEvent("tick"),this.enabled&&(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=ka()))}};
k.start=function(){this.enabled=!0;this.timer_||(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=ka())};k.stop=function(){this.enabled=!1;this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null)};k.disposeInternal=function(){vc.superClass_.disposeInternal.call(this);this.stop();delete this.timerObject_};
var wc=function(a,b,c){if(ga(a))c&&(a=w(a,c));else if(a&&"function"==typeof a.handleEvent)a=w(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:l.setTimeout(a,b||0)};var K=function(){this.cycle_=0;this.timerDuration_=2E3;this.isFinished_=!1;this.isStopped_=!0;this.timer_=this.startTime_=this.onFinish_=this.onTick_=this.onLoop_=this.loopCycles_=null};x("gpa.layouts.common.service.AutoCycle",K);K.prototype.getCycle=function(){return this.cycle_};K.prototype.getCycle=K.prototype.getCycle;K.prototype.setFinishCallback=function(a){this.onFinish_=a;return this};K.prototype.setFinishCallback=K.prototype.setFinishCallback;K.prototype.resume=function(){this.start()};
K.prototype.resume=K.prototype.resume;K.prototype.start=function(a,b){this.isFinished_||(null===this.onTick_&&null!=a&&(this.onTick_=a),null!=b&&(this.timerDuration_=b),null===this.timer_&&null==this.startTime_&&(this.startTime_=(new Date).getTime(),this.timer_=new vc(this.timerDuration_),I(this.timer_,"tick",w(this.timerHandler_,this))),this.timer_.start(),this.isStopped_=!1)};K.prototype.start=K.prototype.start;K.prototype.stop=function(){this.isStopped_=!0};K.prototype.stop=K.prototype.stop;
K.prototype.timerHandler_=function(){if(this.isStopped_)this.timer_.stop();else if(3E4<=(new Date).getTime()-this.startTime_&&(this.isFinished_=!0,this.timer_.stop(),this.timer_.dispose()),null!==this.onFinish_&&this.isFinished_)this.onFinish_();else{this.cycle_++;if(null!==this.onTick_)this.onTick_();if(null!==this.loopCycles_&&null!==this.onLoop_&&0==this.cycle_%this.loopCycles_)this.onLoop_()}};var xc=angular.module("gpa.layouts.common.module.service.autoCycle",[]).service("autoCycle",K);
x("gpa.layouts.common.module.service.autoCycle",xc);var yc={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var Ec=function(a){var b={};a=String(a);var c=zc(a);if(Ac.test(c))return b.hex=Bc(c),b.type="hex",b;c=Cc(a);if(c.length)return b.hex=Dc(c[0],c[1],c[2]),b.type="rgb",b;if(yc&&(c=yc[a.toLowerCase()]))return b.hex=c,b.type="named",b;throw Error(a+" is not a valid color string");},Fc=function(a){return!!(Ac.test(zc(a))||Cc(a).length||yc&&yc[a.toLowerCase()])},Gc=/#(.)(.)(.)/,Bc=function(a){if(!Ac.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(Gc,"#$1$1$2$2$3$3"));return a.toLowerCase()},
Hc=function(a){a=Bc(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]},Dc=function(a,b,c){a=Number(a);b=Number(b);c=Number(c);if(isNaN(a)||0>a||255<a||isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c)throw Error('"('+a+","+b+","+c+'") is not a valid RGB color');return"#"+Ic(a.toString(16))+Ic(b.toString(16))+Ic(c.toString(16))},Jc=function(a,b,c){0>c?c+=1:1<c&&--c;return 1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a},Ac=/^#(?:[0-9a-f]{3}){1,2}$/i,Kc=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i,
Cc=function(a){var b=a.match(Kc);if(b){a=Number(b[1]);var c=Number(b[2]),b=Number(b[3]);if(0<=a&&255>=a&&0<=c&&255>=c&&0<=b&&255>=b)return[a,c,b]}return[]},Ic=function(a){return 1==a.length?"0"+a:a},zc=function(a){return"#"==a.charAt(0)?a:"#"+a},Lc=function(a,b,c){c=Math.min(Math.max(c,0),1);return[Math.round(c*a[0]+(1-c)*b[0]),Math.round(c*a[1]+(1-c)*b[1]),Math.round(c*a[2]+(1-c)*b[2])]};var Qc=function(a){var b={};a=String(a);var c=zc(a);if(Mc.test(c))return b.hex=Nc(c),b.type="hex",b;var d;a:{var e=a.match(Oc);if(e){var c=Number(e[1]),f=Number(e[2]);d=Number(e[3]);e=Number(e[4]);if(0<=c&&255>=c&&0<=f&&255>=f&&0<=d&&255>=d&&0<=e&&1>=e){d=[c,f,d,e];break a}}d=[]}if(d.length){a=d[0];c=d[1];f=d[2];d=d[3];e=Math.floor(255*d);if(isNaN(e)||0>e||255<e)throw Error('"('+a+","+c+","+f+","+d+'") is not a valid RGBA color');d=Ic(e.toString(16));a=Dc(a,c,f)+d;b.hex=a;b.type="rgba";return b}a:{if(e=
a.match(Pc))if(c=Number(e[1]),f=Number(e[2]),d=Number(e[3]),e=Number(e[4]),0<=c&&360>=c&&0<=f&&100>=f&&0<=d&&100>=d&&0<=e&&1>=e){e=[c,f,d,e];break a}e=[]}if(e.length){c=e[0];f=e[1];d=e[2];a=e[3];e=Math.floor(255*a);if(isNaN(e)||0>e||255<e)throw Error('"('+c+","+f+","+d+","+a+'") is not a valid HSLA color');a=Ic(e.toString(16));f/=100;d/=100;var g=e=0,h=0,c=c/360;if(0==f)e=g=h=255*d;else var m=h=0,m=.5>d?d*(1+f):d+f-f*d,h=2*d-m,e=255*Jc(h,m,c+1/3),g=255*Jc(h,m,c),h=255*Jc(h,m,c-1/3);c=[Math.round(e),
Math.round(g),Math.round(h)];a=Dc(c[0],c[1],c[2])+a;b.hex=a;b.type="hsla";return b}throw Error(a+" is not a valid color string");},Rc=/#(.)(.)(.)(.)/,Nc=function(a){if(!Mc.test(a))throw Error("'"+a+"' is not a valid alpha hex color");5==a.length&&(a=a.replace(Rc,"#$1$1$2$2$3$3$4$4"));return a.toLowerCase()},Tc=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];if(isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c||isNaN(d)||0>d||255<d||isNaN(a)||0>a||1<a)throw Error('"('+b+","+c+","+d+","+a+')" is not a valid RGBA color');
return Sc([b,c,d,a])},Mc=/^#(?:[0-9a-f]{4}){1,2}$/i,Oc=/^(?:rgba)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|1|0\.\d{0,10})\)$/i,Pc=/^(?:hsla)\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\%,\s?(0|[1-9]\d{0,2})\%,\s?(0|1|0\.\d{0,10})\)$/i,Sc=function(a){var b=a.slice(0);b[3]=Math.round(1E3*a[3])/1E3;return"rgba("+b.join(",")+")"};var L=function(){};x("gpa.layouts.common.service.ColorUtils",L);L.prototype.shadeColor=function(a,b){var c;c=Hc(a);c=Lc([0,0,0],c,b);return Dc(c[0],c[1],c[2])};L.prototype.shadeColor=L.prototype.shadeColor;L.prototype.getFullHexColor=function(a){return Ec(a).hex};L.prototype.getFullHexColor=L.prototype.getFullHexColor;L.prototype.getContrastRatio=function(a,b){a=zc(a);b=zc(b);if(!Fc(a)||!Fc(b))return null;var c=Hc(a),d=Hc(b);return(new Color(c)).contrast(new Color(d)).ratio};
L.prototype.getContrastRatio=L.prototype.getContrastRatio;L.prototype.normalizeHex=function(a){return a?a.replace(/0x/,"#"):""};L.prototype.normalizeHex=L.prototype.normalizeHex;L.prototype.hexToRgba=function(a,b){var c=Hc(a);c.push(isNaN(b)||0>b||1<b?1:b);return Tc(c)};L.prototype.hexToRgba=L.prototype.hexToRgba;L.prototype.getContrastColor=function(a,b){var c=b?"#313131":"#000",d=Hc(a);return 128<=(299*d[0]+587*d[1]+144*d[2])/1E3?c:"#fff"};L.prototype.getContrastColor=L.prototype.getContrastColor;
L.prototype.changeBrightness=function(a,b,c){a=Ec(a);a=Hc(a.hex);a=0<b?Lc([255,255,255],a,b):Lc([0,0,0],a,Math.abs(b));a.push(c||1);return Tc(a)};L.prototype.changeBrightness=L.prototype.changeBrightness;
L.prototype.changeHsl=function(a,b,c,d){var e=Hc(a);a=e[0]/255;var f=e[1]/255,e=e[2]/255,g=Math.max(a,f,e),h=Math.min(a,f,e),m=0,n=0,p=.5*(g+h);g!=h&&(g==a?m=60*(f-e)/(g-h):g==f?m=60*(e-a)/(g-h)+120:g==e&&(m=60*(a-f)/(g-h)+240),n=0<p&&.5>=p?(g-h)/(2*p):(g-h)/(2-2*p));a=[Math.round(m+360)%360,n,p];a[0]=Math.round(Math.min(Math.max(0,a[0]+parseInt(b,10)),360));a[1]=Math.round(Math.min(Math.max(0,a[1]+parseInt(c,10)),100));a[2]=Math.round(Math.min(Math.max(0,a[2]+parseInt(d,10)),100));return"hsl("+a[0]+
","+a[1]+"%,"+a[2]+"%)"};L.prototype.changeHsl=L.prototype.changeHsl;var Uc=angular.module("gpa.layouts.common.module.service.colorUtils",[]).service("colorUtils",L);x("gpa.layouts.common.module.service.colorUtils",Uc);var M=function(){};x("gpa.layouts.common.service.TypeUtils",M);M.prototype.isEmpty=function(a){return pa(null==a?"":String(a))};M.prototype.isEmpty=M.prototype.isEmpty;M.prototype.toBoolean=function(a){return this.isEmpty(a)?!1:"true"==a.toLowerCase()};M.prototype.toBoolean=M.prototype.toBoolean;M.prototype.toNumberStrict=function(a){var b=Number(a);return 0==b&&pa(a)?NaN:b};M.prototype.toNumberStrict=M.prototype.toNumberStrict;
M.prototype.isNumberStrict=function(a){a=this.toNumberStrict(a);return fa(a)&&!isNaN(a)};M.prototype.isNumberStrict=M.prototype.isNumberStrict;var Vc=angular.module("gpa.layouts.common.module.service.typeUtils",[]).service("typeUtils",M);x("gpa.layouts.common.module.service.typeUtils",Vc);var N=function(a,b){this.typeUtils_=b;if(!a[Wc.DATA_LAYER_1]||!a[Wc.DATA_LAYER_1][Wc.DATA_LAYER_2]||!da(a[Wc.DATA_LAYER_1][Wc.DATA_LAYER_2]))throw Error("Malformed adData object.");var c=a[Wc.DATA_LAYER_1][Wc.DATA_LAYER_2][0],d={},e;for(e in c){var f=e.split(Xc),g=!1;if(3==f.length)var h=f[0],m=f[1],n=f[2],g=!this.typeUtils_.isEmpty(h)&&!/[^0-9]/.test(m)&&!this.typeUtils_.isEmpty(n);g?(f=Ua(d,h,[]),f=Ua(f,m,{}),Ua(f,n,c[e])):d[e]=c[e]}this.data=d;this.adHeight_=a.google_height;this.adWidth_=a.google_width};
x("gpa.layouts.common.service.DataUtils",N);N.$inject=["DynamicData","typeUtils"];var Xc=/_/,Yc=/imageUrl/i,Wc={AD_HEIGHT:"google_height",AD_WIDTH:"google_width",DATA_LAYER_1:"google_template_data",DATA_LAYER_2:"adData"};N.prototype.getAdSize=function(){return new Ya(this.adWidth_,this.adHeight_)};N.prototype.getAdSize=N.prototype.getAdSize;N.prototype.getAttributeType=function(a,b){return this.data.hasOwnProperty(a)?r(b)?this.data[a][b]:this.data[a]:[]};N.prototype.getAttributeType=N.prototype.getAttributeType;
N.prototype.getImageUrlsFromObject=function(a){var b=[],c;for(c in a)c.match(Yc)&&!this.typeUtils_.isEmpty(a[c])&&b.push(a[c]);return b};N.prototype.getImageUrlsFromObject=N.prototype.getImageUrlsFromObject;var Zc=angular.module("gpa.layouts.common.module.service.dataUtils",[Vc.name]).service("dataUtils",N);x("gpa.layouts.common.module.service.dataUtils",Zc);var $c=/custom\.elements\.min\.js/,ad=!1;x("gpa.layouts.common.onAdData.polymerIsOnPage",ad);var bd=!1,cd=function(){bd=!0;for(var a=!1,b=document.getElementsByTagName("script"),c=0,d;(d=b[c])&&!(a=$c,a=!(!d.src||!d.src.match(a)));c++);ad=a};x("gpa.layouts.common.onAdData.checkForPolymer",cd);var dd=window;cd();dd.gpaLayoutsCommonCheckPolymer=void 0;x("window.gpaLayoutsCommonCheckPolymer",window.gpaLayoutsCommonCheckPolymer);
var hd=function(a,b){ed.constant("DynamicData",a);ed.constant("ExitApi",b);bd||cd();ad?window.addEventListener("WebComponentsReady",fd):gd()};x("gpa.layouts.common.onAdData.callback",hd);var fd=function(){gd()},gd=function(){angular.bootstrap(document,["gpa.layouts.common.module.application"])};x("gpa.layouts.common.onAdData.bootstrapAngular",gd);window.onAdData=hd;x("window.onAdData",window.onAdData);var ed=angular.module("gpa.layouts.common.module.onAdData",[]);
x("gpa.layouts.common.module.onAdData",ed);var id=function(a){this.exitApi_=a;this.exitKey=null};x("gpa.layouts.common.service.ExitUtils",id);id.$inject=["ExitApi"];id.prototype.exitClickHandler=function(){this.exitKey?this.exitApi_.exit(this.exitKey):this.exitApi_.exit()};id.prototype.exitClickHandler=id.prototype.exitClickHandler;id.prototype.addExitClickListener=function(a){da(a)?Ha(a,function(a){(a=ob(a))&&I(a,"click",this.exitClickHandler,!1,this)},this):(a=ob("ad-container"))&&I(a,"click",this.exitClickHandler,!1,this)};
id.prototype.addExitClickListener=id.prototype.addExitClickListener;var jd=angular.module("gpa.layouts.common.module.service.exitUtils",[ed.name]).service("exitUtils",id);x("gpa.layouts.common.module.service.exitUtils",jd);var kd=function(){};x("gpa.layouts.common.service.ItemNavigation",kd);kd.prototype.getItem=function(a,b,c){switch(c){case -1:a=0<a?a-1:b-1;break;case 1:a=a<b-1?a+1:0;break;default:throw Error("direction must either be -1 or 1");}return a};var ld=angular.module("gpa.layouts.common.module.service.itemNavigation",[]).service("itemNavigation",kd);x("gpa.layouts.common.module.service.itemNavigation",ld);var md=function(a){Ub.call(this);this.handler_=a;this.keys_={}};y(md,Ub);var nd=[];md.prototype.listen=function(a,b,c,d){return od(this,a,b,c,d)};var od=function(a,b,c,d,e,f){da(c)||(c&&(nd[0]=c.toString()),c=nd);for(var g=0;g<c.length;g++){var h=I(b,c[g],d||a.handleEvent,e||!1,f||a.handler_||a);if(!h)break;a.keys_[h.key]=h}return a};
md.prototype.unlisten=function(a,b,c,d,e){if(da(b))for(var f=0;f<b.length;f++)this.unlisten(a,b[f],c,d,e);else c=c||this.handleEvent,e=e||this.handler_||this,c=gc(c),d=!!d,b=Xb(a)?a.getListener(b,c,d,e):a?(a=hc(a))?a.getListener(b,c,d,e):null:null,b&&(nc(b),delete this.keys_[b.key]);return this};md.prototype.removeAll=function(){Qa(this.keys_,function(a,b){this.keys_.hasOwnProperty(b)&&nc(a)},this);this.keys_={}};md.prototype.disposeInternal=function(){md.superClass_.disposeInternal.call(this);this.removeAll()};
md.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var O=function(){J.call(this);this.fontList_=[];this.fontsError_=[];this.fontsLoaded_=[];this.fontsLoading_=[];this.webFont_=l.WebFont};y(O,J);x("gpa.layouts.common.service.WebFontLoader",O);O.addEventListener=O.prototype.addEventListener;O.removeEventListener=O.prototype.removeEventListener;O.ERROR_NO_FONTS="Missing font list.";O.prototype.getErrorFonts=function(){return this.fontsError_};O.prototype.getErrorFonts=O.prototype.getErrorFonts;O.prototype.getFontList=function(){return this.fontList_};
O.prototype.getFontList=O.prototype.getFontList;O.prototype.getLoadedFonts=function(){return this.fontsLoaded_};O.prototype.getLoadedFonts=O.prototype.getLoadedFonts;O.prototype.getLoadingFonts=function(){return this.fontsLoading_};O.prototype.getLoadingFonts=O.prototype.getLoadingFonts;O.prototype.addFonts=function(a){var b=[];da(a)?b=a:pa(null==a?"":String(a))||(b=[a]);this.fontList_=Ja(this.fontList_,b)};O.prototype.addFonts=O.prototype.addFonts;
var qd=function(a){a.fontsLoaded_.length+a.fontsError_.length==a.fontList_.length&&0<a.fontsError_.length&&rc(a,new pd("fontloaderror"))};k=O.prototype;k.inactiveCallback_=function(){rc(this,new pd("fontloaderror"))};k.activeCallback_=function(){rc(this,new pd("fontloadsuccess"))};k.loadingCallback_=function(){rc(this,new pd("fontloadinit"))};k.fontLoadingCallback_=function(a){this.fontsLoading_.push(a);rc(this,new rd("fontstatusloading"))};
k.fontActiveCallback_=function(a){this.fontsLoaded_.push(a);rc(this,new rd("fontstatussuccess"));qd(this)};k.fontInactiveCallback_=function(a){this.fontsError_.push(a);rc(this,new rd("fontstatuserror"));qd(this)};
k.loadFonts=function(a){this.timeoutMs_=a||1E3;if(0==this.fontList_.length)throw Error("Missing font list.");this.webFont_.load({google:{families:this.fontList_},timeout:this.timeoutMs_,loading:w(this.loadingCallback_,this),active:w(this.activeCallback_,this),inactive:w(this.inactiveCallback_,this),fontloading:w(this.fontLoadingCallback_,this),fontactive:w(this.fontActiveCallback_,this),fontinactive:w(this.fontInactiveCallback_,this)})};O.prototype.loadFonts=O.prototype.loadFonts;
var rd=function(a){H.call(this,a)};y(rd,H);var pd=function(a){H.call(this,a)};y(pd,H);var sd=angular.module("gpa.layouts.common.module.service.webFontLoader",[]).service("webFontLoader",O);x("gpa.layouts.common.module.service.webFontLoader",sd);var td=function(a){J.call(this);this.imageIdToRequestMap_={};this.imageIdToImageMap_={};this.handler_=new md(this);this.parent_=a};y(td,J);var ud=[D&&!E("11")?"readystatechange":"load","abort","error"];k=td.prototype;k.addImage=function(a,b,c){(b=t(b)?b:b.src)&&(this.imageIdToRequestMap_[a]={src:b,corsRequestType:r(c)?c:null})};
k.removeImage=function(a){delete this.imageIdToRequestMap_[a];var b=this.imageIdToImageMap_[a];b&&(delete this.imageIdToImageMap_[a],this.handler_.unlisten(b,ud,this.onNetworkEvent_),Ta(this.imageIdToImageMap_)&&Ta(this.imageIdToRequestMap_)&&this.dispatchEvent("complete"))};
k.start=function(){var a=this.imageIdToRequestMap_;Ha(Sa(a),function(b){var c=a[b];if(c&&(delete a[b],!this.disposed_)){var d;this.parent_?(d=this.parent_,d=(d?new Eb(ub(d)):na||(na=new Eb)).createDom("IMG")):d=new Image;c.corsRequestType&&(d.crossOrigin=c.corsRequestType);this.handler_.listen(d,ud,this.onNetworkEvent_);this.imageIdToImageMap_[b]=d;d.id=b;d.src=c.src}},this)};
k.onNetworkEvent_=function(a){var b=a.currentTarget;if(b){if("readystatechange"==a.type)if("complete"==b.readyState)a.type="load";else return;"undefined"==typeof b.naturalWidth&&("load"==a.type?(b.naturalWidth=b.width,b.naturalHeight=b.height):(b.naturalWidth=0,b.naturalHeight=0));this.dispatchEvent({type:a.type,target:b});this.disposed_||this.removeImage(b.id)}};
k.disposeInternal=function(){delete this.imageIdToRequestMap_;delete this.imageIdToImageMap_;var a=this.handler_;a&&"function"==typeof a.dispose&&a.dispose();td.superClass_.disposeInternal.call(this)};var P=function(){J.call(this);this.imageLoader_=new td;this.loadedImages_=0;this.preloadedImages_={};this.timerId_=0;this.timedOut_=!1;this.totalImages_=0;I(this.imageLoader_,"complete",this.completeHandler_,!1,this);I(this.imageLoader_,"load",this.loadHandler_,!1,this)};y(P,J);x("gpa.layouts.common.service.ImagePreloader",P);P.addEventListener=P.prototype.addEventListener;P.removeEventListener=P.prototype.removeEventListener;
P.prototype.loadHandler_=function(a){this.loadedImages_++;a=a.target;this.preloadedImages_[a.id]=a.src};P.prototype.completeHandler_=function(){this.timedOut_||(l.clearTimeout(this.timerId_),this.dispatchEvent(new vd(this.loadedImages_==this.totalImages_?"imageloadcomplete":"imageloaderror",0,this.loadedImages_,this.totalImages_)))};P.prototype.timeoutHandler_=function(){this.timedOut_=!0;this.dispatchEvent(new vd("imageloadtimeout",0,this.loadedImages_,this.totalImages_))};
P.prototype.addImage=function(a,b){pa(null==b?"":String(b))||(this.totalImages_++,this.imageLoader_.addImage(a,b))};P.prototype.addImage=P.prototype.addImage;P.prototype.removeImage=function(a){this.totalImages_--;this.imageLoader_.removeImage(a)};P.prototype.removeImage=P.prototype.removeImage;P.prototype.startPreloading=function(a){if(0>=this.totalImages_)throw Error("No images in queue.");a=a||1500;this.timerId_=wc(w(this.timeoutHandler_,this),a);this.imageLoader_.start()};
P.prototype.startPreloading=P.prototype.startPreloading;var vd=function(a,b,c,d){H.call(this,a);this.loadedImages=c;this.totalImages=d};y(vd,H);var wd=angular.module("gpa.layouts.common.module.service.imagePreloader",[]).service("imagePreloader",P);x("gpa.layouts.common.module.service.imagePreloader",wd);var xd=function(a,b){J.call(this);this.enableImagePreloading_=this.enableFontPreloading_=!1;this.eventHandler_=new md(this);this.fontList_=[];this.imageUrlList_=[];this.loadedImages_=0;this.preloadCompleteImages_=this.preloadCompleteFonts_=!1;this.preloaderFonts_=b;this.preloaderImages_=a;this.preloaderMaxTimeout_=1100;this.preloadStarted_=!1;this.preloadTimerId_=NaN;this.totalImages_=this.totalFonts_=0};y(xd,J);x("gpa.layouts.common.service.PreloadManager",xd);xd.$inject=["imagePreloader","webFontLoader"];
xd.prototype.start=function(a,b,c,d,e){this.preloaderMaxTimeout_=c||1100;this.enableFontPreloading_=a;this.fontList_=d||[];this.enableImagePreloading_=b;this.imageUrlList_=e||[];if(this.enableFontPreloading_&&0!=this.fontList_.length||this.enableImagePreloading_&&0!=this.imageUrlList_.length)this.preloadStarted_||(this.preloadTimerId_=wc(this.preloadTimeoutHandler_,this.preloaderMaxTimeout_,this),this.preloadStarted_=!0),this.enableFontPreloading_&&this.enableImagePreloading_?(yd(this),Ad(this)):
this.enableFontPreloading_&&!this.enableImagePreloading_?yd(this):this.enableImagePreloading_&&!this.enableFontPreloading_&&Ad(this)};xd.prototype.start=xd.prototype.start;
var Bd=function(a){isNaN(a.preloadTimerId_)||(l.clearTimeout(a.preloadTimerId_),a.preloadTimerId_=NaN)},yd=function(a){a.totalFonts_=a.fontList_.length;od(a.eventHandler_,a.preloaderFonts_,"fontloadsuccess",a.preloadSuccessHandler_,!1,a);od(a.eventHandler_,a.preloaderFonts_,"fontloaderror",a.preloadErrorHandler_,!1,a);a.preloaderFonts_.addFonts(a.fontList_);a.preloaderFonts_.loadFonts()},Ad=function(a){a.totalImages_=a.imageUrlList_.length;od(a.eventHandler_,a.preloaderImages_,"imageloadcomplete",
a.preloadSuccessHandler_,!1,a);od(a.eventHandler_,a.preloaderImages_,"imageloaderror",a.preloadErrorHandler_,!1,a);od(a.eventHandler_,a.preloaderImages_,"imageloadtimeout",a.preloadErrorHandler_,!1,a);for(var b=0,c=a.imageUrlList_.length;b<c;b++)a.preloaderImages_.addImage("gpa-layouts-common-preloaded-image-"+b,a.imageUrlList_[b]);a.preloaderImages_.startPreloading()};
xd.prototype.preloadSuccessHandler_=function(a){Bd(this);switch(a.type){case "fontloadsuccess":this.preloadCompleteFonts_=!0;break;case "imageloadcomplete":this.preloadCompleteImages_=!0,this.loadedImages_=a.loadedImages,this.totalImages_=a.totalImages}(this.preloadCompleteFonts_&&this.preloadCompleteImages_||this.preloadCompleteFonts_&&!this.enableImagePreloading_||this.preloadCompleteImages_&&!this.enableFontPreloading_)&&this.dispatchEvent(new Cd("preloadcomplete",0,0,0,0,this.loadedImages_,this.totalImages_))};
xd.prototype.preloadErrorHandler_=function(a){Bd(this);switch(a.type){case "imageloaderror":case "imageloadtimeout":this.loadedImages_=a.loadedImages,this.totalImages_=a.totalImages}this.dispatchEvent(new Cd("preloadloaderor",0,0,0,0,this.loadedImages_,this.totalImages_))};
xd.prototype.preloadTimeoutHandler_=function(){Bd(this);this.eventHandler_.unlisten(this.preloaderFonts_,"fontloadsuccess",this.preloadSuccessHandler_,!1,this);this.eventHandler_.unlisten(this.preloaderFonts_,"fontloaderror",this.preloadErrorHandler_,!1,this);this.dispatchEvent(new Cd("preloadtimeouterror",0,0,0,0,this.loadedImages_,this.totalImages_))};var Cd=function(a,b,c,d,e,f,g){H.call(this,a);this.loadedImages=f;this.totalImages=g};y(Cd,H);
var Dd=angular.module("gpa.layouts.common.module.service.preloadManager",[wd.name,sd.name]).service("preloadManager",xd);x("gpa.layouts.common.module.service.preloadManager",Dd);var Q=function(a,b){this.dataUtils_=a;this.typeUtils_=b};x("gpa.layouts.common.service.PriceUtils",Q);Q.$inject=["dataUtils","typeUtils"];var Ed=/(\.|,)0{2}(?![\d])/;Q.prototype.removeCents=function(a){return a?a.replace(Ed,""):""};Q.prototype.removeCents=Q.prototype.removeCents;Q.prototype.salePriceExists=function(a){var b=a.regularPrice;this.typeUtils_.isEmpty(b)&&(b=a.price);var c=this.dataUtils_;a=a.salePrice;c=!c.typeUtils_.isEmpty(a)&&!c.typeUtils_.isEmpty(b);return a!=b&&c};
Q.prototype.salePriceExists=Q.prototype.salePriceExists;Q.prototype.formatSaleDiscount=function(a,b,c){if(this.typeUtils_.isEmpty(a))return"";a=Math.abs(Math.round(100*a));if(0==a)return"";a=Math.min(a,100);b&&(a*=-1);return a+(c||"%")};Q.prototype.formatSaleDiscount=Q.prototype.formatSaleDiscount;var Fd=angular.module("gpa.layouts.common.module.service.priceUtils",[Zc.name,Vc.name]).service("priceUtils",Q);x("gpa.layouts.common.module.service.priceUtils",Fd);var Gd=function(a,b,c,d,e){this.reset(a,b,c,d,e)};Gd.prototype.exception_=null;var Hd=0;Gd.prototype.reset=function(a,b,c,d,e){"number"==typeof e||Hd++;d||ka();this.level_=a;this.msg_=b;delete this.exception_};Gd.prototype.setLevel=function(a){this.level_=a};var Id=function(a){this.name_=a;this.handlers_=this.children_=this.level_=this.parent_=null},Jd=function(a,b){this.name=a;this.value=b};Jd.prototype.toString=function(){return this.name};var Kd=new Jd("SEVERE",1E3),Ld=new Jd("WARNING",900),Md=new Jd("INFO",800),Nd=new Jd("CONFIG",700);Id.prototype.getName=function(){return this.name_};Id.prototype.getParent=function(){return this.parent_};Id.prototype.getChildren=function(){this.children_||(this.children_={});return this.children_};
Id.prototype.setLevel=function(a){this.level_=a};var Od=function(a){if(a.level_)return a.level_;if(a.parent_)return Od(a.parent_);Fa("Root logger has no level set.");return null};
Id.prototype.log=function(a,b,c){if(a.value>=Od(this).value)for(ga(b)&&(b=b()),a=new Gd(a,String(b),this.name_),c&&(a.exception_=c),c="log:"+a.msg_,l.console&&(l.console.timeStamp?l.console.timeStamp(c):l.console.markTimeline&&l.console.markTimeline(c)),l.msWriteProfilerMark&&l.msWriteProfilerMark(c),c=this;c;){b=c;var d=a;if(b.handlers_)for(var e=0,f=void 0;f=b.handlers_[e];e++)f(d);c=c.getParent()}};Id.prototype.info=function(a,b){this.log(Md,a,b)};
Id.prototype.config=function(a,b){this.log(Nd,a,b)};var Pd={},Qd=null,Rd=function(a){Qd||(Qd=new Id(""),Pd[""]=Qd,Qd.setLevel(Nd));var b;if(!(b=Pd[a])){b=new Id(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=Rd(a.substr(0,c));c.getChildren()[d]=b;b.parent_=c;Pd[a]=b}return b};var Sd=function(a,b){a&&a.info(b,void 0)};var R=function(a,b,c,d,e,f){this.callbackScope_=b||window;this.endArgs_=f||[];this.endCallback_=e||ba;this.logger_=Rd("gpa.layouts.common.utils.State");this.name_=a;this.startArgs_=d||[];this.startCallback_=c||ba};x("gpa.layouts.common.utils.State",R);R.prototype.getName=function(){return this.name_};R.prototype.getName=R.prototype.getName;R.prototype.start=function(){Sd(this.logger_,this.name_+" start");this.startCallback_&&this.startCallback_.apply(this.callbackScope_,this.startArgs_)};
R.prototype.start=R.prototype.start;R.prototype.end=function(){Sd(this.logger_,this.name_+" end");this.endCallback_&&this.endCallback_.apply(this.callbackScope_,this.endArgs_)};R.prototype.end=R.prototype.end;var S=function(a){this.currentState_=a||Td;this.isRunning_=!1};x("gpa.layouts.common.utils.StateMachine",S);var Td=new R("INITIAL");S.prototype.getCurrentState=function(){return this.currentState_};S.prototype.getCurrentState=S.prototype.getCurrentState;S.prototype.getIsRunning=function(){return this.isRunning_};
S.prototype.getIsRunning=S.prototype.getIsRunning;S.prototype.init=function(){this.isRunning_=!0;this.currentState_.start()};S.prototype.init=S.prototype.init;S.prototype.changeState=function(a){this.currentState_.end();this.currentState_=a;this.currentState_.start()};S.prototype.changeState=S.prototype.changeState;S.prototype.end=function(){this.currentState_.end();this.isRunning_=!1};S.prototype.end=S.prototype.end;var U=function(a,b,c,d,e,f,g,h,m,n,p){this.autoCycle=d;this.autoCycleTimerDuration=2E3;this.autoStartAutoCycle=!1;this.colorUtils=e;this.currentItemIndex=0;this.customFirstState=null;this.data=f.data;this.dataUtils=f;this.design={};this.enableImagePreloading=this.enableFontPreloading=!1;this.eventHandler_=new md(this);this.exitUtils_=g;this.fontList=[];this.headline={};this.imageList=[];this.itemNavigation_=h;this.items=[];this.itemsLimit=0;this.layoutBackgroundImage="";this.layoutReady=!1;this.loadTimeStart_=
(new Date).getTime();this.loadTimeTotal_=0;this.logger_=Rd("common.controller.MainCtrl");this.preloadManager_=m;this.preloadSuccessful=!1;this.preloaderTimeout=1E3;this.priceUtils=n;this.productClickOnly=this.data.hasOwnProperty("Headline")?p.toBoolean(this.data.Headline[0].productClickOnly):!0;this.rootScope=a;this.setFirstItemOnFinish=!0;this.scope=b;this.states={};this.stateMachine=null;this.timeout=c;this.typeUtils=p;this.scope.$evalAsync(w(this.init,this))};
x("gpa.layouts.common.controller.MainCtrl",U);U.$inject="$rootScope $scope $timeout autoCycle colorUtils dataUtils exitUtils itemNavigation preloadManager priceUtils typeUtils".split(" ");U.prototype.getItemCountClass=function(){return"item-count-"+this.itemsLimit};U.prototype.getItemCountClass=U.prototype.getItemCountClass;U.prototype.getExitUtils=function(){return this.exitUtils_};U.prototype.getExitUtils=U.prototype.getExitUtils;U.prototype.getTotalLoadTime=function(){return this.loadTimeTotal_};
U.prototype.getTotalLoadTime=U.prototype.getTotalLoadTime;k=U.prototype;k.onAutoCycleFinish=function(){this.currentItemIndex=0;this.timeout(w(function(){this.scope.$apply()},this))};k.onCycle=function(){this.currentItemIndex=kd.prototype.getItem(this.currentItemIndex,this.itemsLimit,1);this.timeout(w(function(){this.scope.$apply()},this));this.rootScope.$broadcast("autocycle")};
k.init=function(){this.states.pending=new R("pending",this);this.states.parsingData=new R("parsingData",this,this.stateParsingDataStart,null,this.stateParsingDataEnd,null);this.states.preloading=new R("preloading",this,this.statePreloadingStart);this.states.scalingAssets=new R("scalingAssets",this,this.stateScalingAssetsStart);this.states.ready=new R("ready",this,this.stateReadyStart);this.stateMachine=new S(this.states.pending);this.stateMachine.init();this.stateMachine.changeState(this.customFirstState||
this.states.parsingData)};
k.stateParsingDataStart=function(){this.rootScope.$broadcast("layoutparsingdata");this.adSize=this.dataUtils.getAdSize();this.design=this.dataUtils.getAttributeType("Design",0);this.headline=this.dataUtils.getAttributeType("Headline",0);this.items=this.dataUtils.getAttributeType("Product");this.typeUtils.isEmpty(this.design.bgImageUrl)||(this.layoutBackgroundImage=Aa("background-image: url(",this.design.bgImageUrl,");"));var a=this.itemsLimit=Math.min(this.items.length,this.itemsLimit);if(0!=a)for(var b=
this.dataUtils.data.Product,c=b.length;c--&&c>a-1;)Pa(b,c,1);for(var a=this.dataUtils.getImageUrlsFromObject(this.design),b=this.dataUtils.getImageUrlsFromObject(this.headline),c=[],d=0,e;e=this.items[d];d++)e=this.dataUtils.getImageUrlsFromObject(e),c=Ja(c,e);this.imageList=Ja(a,b,c);this.stateMachine.changeState(this.states.preloading)};
k.stateParsingDataEnd=function(){this.exitUtils_.exitKey=this.productClickOnly?"Product_0_url":null;this.rootScope.$on("iteminteractionover",w(this.onItemInteractionHandler,this));this.rootScope.$on("iteminteractionleave",w(this.onItemInteractionHandler,this));this.exitUtils_.addExitClickListener();var a=this.adSize.width/this.adSize.height;this.layoutShape=1.33<a?"horizontal":.75>a?"vertical":"square"};
k.statePreloadingStart=function(){this.data.hasOwnProperty("Product")||(this.enableImagePreloading=!1);this.enableFontPreloading||this.enableImagePreloading?(od(this.eventHandler_,this.preloadManager_,"preloadcomplete",this.preloadSuccessHandler_,!1,this),od(this.eventHandler_,this.preloadManager_,["preloadloaderor","preloadtimeouterror"],this.preloadErrorHandler_,!1,this),this.rootScope.$broadcast("layoutpreloading"),this.preloadManager_.start(this.enableFontPreloading,this.enableImagePreloading,
this.preloaderTimeout,this.fontList,this.imageList)):this.stateMachine.changeState(this.states.scalingAssets)};k.stateScalingAssetsStart=function(){this.rootScope.$broadcast("layoutscalingassets");this.rootScope.$on("dynamicfitcomplete",w(this.dynamicFitCompleteHandler_,this));this.timeout(w(function(){this.rootScope.$broadcast("fitdynamicelements")},this))};
k.stateReadyStart=function(){Sd(this.logger_,"layoutready");this.layoutReady||this.timeout(w(function(){this.layoutReady=!0;this.loadTimeTotal_=(new Date).getTime()-this.loadTimeStart_},this));this.rootScope.$broadcast("layoutready");this.autoStartAutoCycle&&this.autoCycle.start(w(this.onCycle,this),this.autoCycleTimerDuration);this.setFirstItemOnFinish&&this.autoCycle.setFinishCallback(w(this.onAutoCycleFinish,this))};k.setItemIndex=function(a){this.currentItemIndex=a};U.prototype.setItemIndex=U.prototype.setItemIndex;
U.prototype.isCurrentItemIndex=function(a){return this.currentItemIndex==a};U.prototype.isCurrentItemIndex=U.prototype.isCurrentItemIndex;U.prototype.setNextItem=function(){Ud(this,1)};U.prototype.setNextItem=U.prototype.setNextItem;U.prototype.setPreviousItem=function(){Ud(this,-1)};U.prototype.setPreviousItem=U.prototype.setPreviousItem;
var Ud=function(a,b){var c=a.itemNavigation_.getItem(a.currentItemIndex,a.items.length,b);a.setItemIndex(c);a.productClickOnly&&(a.exitUtils_.exitKey="Product_"+a.currentItemIndex+"_url")};
U.prototype.onItemInteractionHandler=function(a,b){var c=parseInt(b,10);"iteminteractionover"==a.name&&(this.exitUtils_.exitKey="Product_"+c+"_url",this.currentItemIndex=c,this.autoCycle.stop(),this.timeout(w(function(){this.scope.$apply()},this)));"iteminteractionleave"==a.name&&(this.autoCycle.resume(),this.productClickOnly||(this.exitUtils_.exitKey=null))};
U.prototype.preloadSuccessHandler_=function(){this.preloadSuccessful=!0;this.rootScope.$broadcast("preloadcomplete",{preloadSuccessful:!0});this.stateMachine.changeState(this.states.scalingAssets)};U.prototype.preloadErrorHandler_=function(){this.preloadSuccessful=!1;this.rootScope.$broadcast("preloadcomplete",{preloadSuccessful:!1});this.stateMachine.changeState(this.states.scalingAssets)};U.prototype.dynamicFitCompleteHandler_=function(){this.stateMachine.changeState(this.states.ready)};
var Vd=angular.module("gpa.layouts.common.module.controller.mainController",[xc.name,Uc.name,Zc.name,jd.name,ld.name,Dd.name,Fd.name,Vc.name]).controller("MainCtrl",U);x("gpa.layouts.common.module.controller.mainController",Vd);var Wd=function(a,b,c,d,e,f,g,h,m,n,p){U.call(this,a,b,c,d,e,f,g,h,m,n,p);this.hasCta=!this.typeUtils.isEmpty(this.data.Headline[0].cta);this.hasDisclaimer=!this.typeUtils.isEmpty(this.data.Headline[0].disclaimer);this.hasHeadline=!this.typeUtils.isEmpty(this.data.Headline[0].txt);this.hasLogo=!this.typeUtils.isEmpty(this.data.Design[0].logoImageUrl);this.itemsContainerClass_={DEFAULT:"row-9-12",FULL_SIZE:"row-1-1",ITEMS_NUMBER:"items-number-",NO_FOOTER:"row-11-12",NO_HEADER:"row-10-12"};this.itemsContainerSelector=
this.itemsContainerClass_.DEFAULT;this.itemsNumber_=this.data.Product.length};y(Wd,U);x("gpa.layouts.kermit.LayoutCtrl",Wd);Wd.$inject="$rootScope $scope $timeout autoCycle colorUtils dataUtils exitUtils itemNavigation preloadManager priceUtils typeUtils".split(" ");
Wd.prototype.init=function(){this.rootScope.$on("layoutready",w(function(){var a=com.greensock.easing.Power3,b=new com.greensock.TimelineLite;b.to(document.querySelector("body"),1,{opacity:1});b.from(document.querySelector("header h2"),.65,{y:"-=100%",opacity:0,ease:a.easeOut},"-=.5");b.staggerFrom(Array.prototype.slice.call(document.querySelectorAll(".item")),1.25,{opacity:0,ease:a.easeInOut},.15,"-=.65");b.from(document.querySelector("footer"),.7,{y:"+=118%",ease:a.easeOut},"-=.6")},this));this.hasHeadline||
this.hasCta||this.hasLogo?!this.hasHeadline||this.hasCta||this.hasLogo?this.hasHeadline||!this.hasCta&&!this.hasLogo||(this.itemsContainerSelector=this.itemsContainerClass_.NO_HEADER):this.itemsContainerSelector=this.itemsContainerClass_.NO_FOOTER:this.itemsContainerSelector=this.itemsContainerClass_.FULL_SIZE;this.itemsContainerSelector+=" "+this.itemsContainerClass_.ITEMS_NUMBER+this.itemsNumber_;Wd.superClass_.init.call(this)};
Wd.prototype.setHslColor=function(a,b,c,d){return this.colorUtils.changeHsl(this.colorUtils.normalizeHex(a),b,c,d)};Wd.prototype.setHslColor=Wd.prototype.setHslColor;var Xd=angular.module("gpa.layouts.kermit.module.controller.layoutController",[xc.name,Uc.name,Zc.name,jd.name,ld.name,Dd.name,Fd.name,Vc.name]).controller("LayoutCtrl",Wd);var Yd=function(a){return{restrict:"AE",scope:{gpaTransparentBg:"@"},link:function(b,c){a(function(){var a=c[0],e=window.getComputedStyle(a).getPropertyValue("background-color");a.style.backgroundColor=Yd.getBackgroundColor_(e,b.gpaTransparentBg)},200)}}};x("gpa.layouts.kermit.directives.TransparentBg",Yd);Yd.$inject=["$timeout"];
Yd.getBackgroundColor_=function(a,b){var c="",c="",d=Math.round(255*b);if(isNaN(d)||0>d||255<d)d=255;d=Ic(d.toString(16));if(0==a.lastIndexOf("rgb(",0)){d=Cc(a);if(!d.length)throw Error(a+" is not a valid RGB color");c=d;c.push(parseFloat(b));c=Tc(c)}else if(0==a.lastIndexOf("rgba(",0)){c=Qc(a);c=c.hex;if(Mc.test(c))c=Nc(zc(c)).substring(0,7);else throw Error(c+" is not a valid 8-hex color string");d=Nc(c+d);c=Sc([parseInt(d.substr(1,2),16),parseInt(d.substr(3,2),16),parseInt(d.substr(5,2),16),parseInt(d.substr(7,
2),16)/255])}return c};Yd.DIRECTIVE_NAME="gpaTransparentBg";Yd.DIRECTIVE_NAME=Yd.DIRECTIVE_NAME;
var Zd=function(a,b){return{restrict:"AE",link:function(c,d){function e(){(new Date).getTime()-f>=Zd.DEBOUNCE_TIMEOUT_&&(clearInterval(g),g=null,d.removeClass("resizing"),document.querySelectorAll("[gpa-dynamic-fit]")[0].setAttribute("excludeimage",""),b.$broadcast(h.FIT_DYNAMIC_ELEMENTS,{useOriginalText:!0}),b.$broadcast(h.REDRAW_SALE_BADGE))}var f,g=null,h=la;angular.element(a).bind("resize",function(){null===g&&(f=(new Date).getTime(),d.addClass("resizing"),g=window.setInterval(e,100));f=(new Date).getTime()})}}};
x("gpa.layouts.kermit.directives.Resize",Zd);Zd.$inject=["$window","$rootScope"];Zd.DEBOUNCE_TIMEOUT_=500;Zd.DIRECTIVE_NAME="gpaResize";Zd.DIRECTIVE_NAME=Zd.DIRECTIVE_NAME;var $d=angular.module("gpa.layouts.kermit.module.directive.layoutDirectives",[]).directive(Yd.DIRECTIVE_NAME,Yd).directive(Zd.DIRECTIVE_NAME,Zd);x("gpa.layouts.layoutDependencies",[Xd.name,$d.name,Qb.name]);var V=function(a,b,c,d){J.call(this);this.parentElement_=a;this.imageSource_=b;this.scaleType_=c;this.alignType_=d;this.imageElement_=null;this.imageOriginalSize_=new Ya(0,0);F(this.parentElement_,"overflow","hidden");this.imageElement_=document.createElement("img");this.imageElement_.src=this.imageSource_;F(this.imageElement_,"position","inherit");I(this.imageElement_,"load",this.imageSuccessLoadHandler_,!1,this);I(this.imageElement_,"error",this.imageErrorLoadHandler_,!1,this)};y(V,J);
x("ddab.layouts.utils.DynamicImageFit",V);V.addEventListener=V.prototype.addEventListener;V.removeEventListener=V.prototype.removeEventListener;V.prototype.getImage=function(){return this.imageElement_};V.prototype.getImage=V.prototype.getImage;
V.prototype.imageSuccessLoadHandler_=function(){this.imageOriginalSize_=new Ya(this.imageElement_.width,this.imageElement_.height);var a=new Ya(this.parentElement_.clientWidth,this.parentElement_.clientHeight),b;var c=this.imageOriginalSize_;b=this.scaleType_;if("none"==b||"shrink_to_fit"==b&&c.width<=a.width&&c.height<=a.height)b=c;else{var c=c.width/c.height,d=a.width/a.height;b="fit"==b&&c>d||"fill"==b&&c<d||"shrink_to_fit"==b&&c>d?new Ya(Math.floor(a.width),Math.floor(a.width/c)):new Ya(Math.floor(a.height*
c),Math.floor(a.height))}var c=b,d=this.alignType_,e=new Xa((a.width-c.width)/2,(a.height-c.height)/2);if("center"!=d){if("top"==d||"top_left"==d||"top_right"==d)e.y=0;if("bottom"==d||"bottom_left"==d||"bottom_right"==d)e.y=a.height-c.height;if("left"==d||"top_left"==d||"bottom_left"==d)e.x=0;if("right"==d||"top_right"==d||"bottom_right"==d)e.x=a.width-c.width}this.imageElement_.width=b.width;this.imageElement_.height=b.height;F(this.imageElement_,"left",e.x+"px");F(this.imageElement_,"top",e.y+"px");
wb(this.parentElement_);this.parentElement_.appendChild(this.imageElement_);rc(this,"image_load")};V.prototype.imageErrorLoadHandler_=function(){this.imageElement_.width=0;this.imageElement_.height=0;rc(this,"image_load_error")};var ce=function(a,b,c){return{restrict:"AE",link:function(d,e,f){b(function(){function d(){a.$broadcast("imagefitcomplete",new ae(u,Z,z))}function h(){d();oc(n);n=null}function m(){c.isEmpty(T)?(p&&p.log(Kd,"Source attribute missing for gpa-image-fit "+u,void 0),d()):(n=new V(v,T,Z,z),I(n,"image_load",h))}var n,p=Rd("gpa.layouts.common.directive.imageFit"),q=be,v=e[0],u=v.id||"",z=f[q.ALIGN_TYPE]||"center",T=f[q.SOURCE],Z=f[q.SCALE_TYPE]||"fit";r(f[q.AUTOFIT])?b(m):a.$on("fitimage",m);v.setAttribute(q.READY_TO_SCALE,
"")})}}};x("gpa.layouts.common.directive.imageFit",ce);ce.$inject=["$rootScope","$timeout","typeUtils"];ce.DIRECTIVE_NAME="gpaImageFit";ce.DIRECTIVE_NAME=ce.DIRECTIVE_NAME;var be={ALIGN_TYPE:"aligntype",AUTOFIT:"autofit",READY_TO_SCALE:"readytoscale",SCALE_TYPE:"scaletype",SOURCE:"source"},ae=function(a,b,c){this.id=a;this.group="default";this.scaleType=b;this.alignType=c};ce.EventData=ae;var de=angular.module("gpa.layouts.common.module.directive.imageFit",[Vc.name]).directive(ce.DIRECTIVE_NAME,ce);
x("gpa.layouts.common.module.directive.imageFit",de);var he=function(a,b,c){function d(a,b){var c=a*b;return isNaN(c)?0:c}return{restrict:"AE",link:function(e,f,g){b(function(){function e(){a.$broadcast("logofitcomplete",new ee(Ma,Na,u))}function m(){e();oc(T);T=null}function n(){if(c.isEmpty(ta))return v&&v.log(Kd,"Source attribute missing for gpa-logo-fit "+Ma,void 0),e(),!1;var a=parseInt(g[p.LOGO_PADDING],10),a=isNaN(a)?0:a,a=Math.min(Math.max(q.MIN,a),q.MAX),b;b=fe;b=new Fb(parseInt(g[b.LOGO_MARGIN_TOP]||0,10),parseInt(g[b.LOGO_MARGIN_RIGHT]||
0,10),parseInt(g[b.LOGO_MARGIN_BOTTOM]||0,10),parseInt(g[b.LOGO_MARGIN_LEFT]||0,10));a=new Fb(a+b.top,a+b.right,a+b.bottom,a+b.left);a:{b=Z;var f;if(nb&&!(D&&E("9")&&!E("10")&&l.SVGElement&&b instanceof l.SVGElement)&&(f=b.parentElement)){b=f;break a}f=b.parentNode;b=yb(f)?f:null}f=b.getBoundingClientRect();f=(new Ya(f.width/2,f.height/2)).floor();var n=a.left+a.right,z=a.bottom+a.top,a=new Fb(a.top/z,a.right/n,a.bottom/z,a.left/n),n=Math.min(n,f.width),z=Math.min(z,f.height),a=(new Fb(d(z,a.top),
d(n,a.right),d(z,a.bottom),d(n,a.left))).floor();angular.element(b).css({"padding-bottom":a.bottom+"px","padding-left":a.left+"px","padding-right":a.right+"px","padding-top":a.top+"px"});T=new V(Z,ta,Na,u);I(T,"image_load",m)}var p=fe,q=ge,v=Rd("gpa.layouts.common.directive.logoFit"),u,z=r(g[p.AUTOFIT]),T,Z=f[0],Ma=Z.id||"",ta,Na;u=g[p.ALIGN_TYPE]||"center";ta=g[p.SOURCE];Na=g[p.SCALE_TYPE]||"fit";z?b(n):a.$on("fitlogo",n);Z.setAttribute(p.READY_TO_SCALE,"")})}}};
x("gpa.layouts.common.directive.logoFit",he);he.$inject=["$rootScope","$timeout","typeUtils"];he.DIRECTIVE_NAME="gpaLogoFit";he.DIRECTIVE_NAME=he.DIRECTIVE_NAME;
var fe={ALIGN_TYPE:"aligntype",AUTOFIT:"autofit",LOGO_MARGIN_BOTTOM:"logoMarginBottom",LOGO_MARGIN_LEFT:"logoMarginLeft",LOGO_MARGIN_RIGHT:"logoMarginRight",LOGO_MARGIN_TOP:"logoMarginTop",LOGO_PADDING:"logoPadding",READY_TO_SCALE:"readytoscale",SCALE_TYPE:"scaletype",SOURCE:"source"},ge={MAX:20,MIN:0},ee=function(a,b,c){this.id=a;this.group="default";this.scaleType=b;this.alignType=c};he.EventData=ee;
var ie=angular.module("gpa.layouts.common.module.directive.logoFit",[Vc.name]).directive(he.DIRECTIVE_NAME,he);x("gpa.layouts.common.module.directive.logoFit",ie);var je=function(a){if(a.classList)return a.classList;a=a.className;return t(a)&&a.match(/\S+/g)||[]},ke=function(a,b){var c;a.classList?c=a.classList.contains(b):(c=je(a),c=0<=Ga(c,b));return c},le=function(a,b){a.classList?a.classList.add(b):ke(a,b)||(a.className+=0<a.className.length?" "+b:b)},me=function(a,b){a.classList?a.classList.remove(b):ke(a,b)&&(a.className=Ia(je(a),function(a){return a!=b}).join(" "))};var ne=function(){};x("gpa.layouts.common.service.TextUtils",ne);ne.prototype.alignText=function(a,b,c,d){var e=document.createElement("SPAN");zb(e,Db(a));b={display:"inline-block","font-size":b+"px",height:"auto","vertical-align":c,width:"100%"};d&&(d=G(a,"text-overflow"),Wa(b,{overflow:"inherit","text-overflow":d||"clip","white-space":"inherit"}));wb(a);a.appendChild(e);le(a,"inline-wrapper");F(e,b)};ne.prototype.alignText=ne.prototype.alignText;
var oe=angular.module("gpa.layouts.common.module.service.textUtils",[]).service("textUtils",ne);x("gpa.layouts.common.module.service.textUtils",oe);x("ddab.layouts.utils.simpleUnicode.CharacterSet",{CJK:"cjk"});var qe=function(a,b){var c;switch(b){case "cjk":c=pe}return c?c.test(a):!1};x("ddab.layouts.utils.simpleUnicode.matchesCharacterSet",qe);for(var re=[/\u3000-\u303f/,/\u3040-\u309f/,/\u30a0-\u30ff/,/\uff00-\uffef/,/\u4e00-\u9fff/,/\u3400-\u4dff/,/\uf900-\ufaff/,/\uac00-\ud7a3/],se="",te=0,ue=re.length;te<ue;te++)se+=re[te].source;var pe=new RegExp("["+se+"]");x("ddab.layouts.utils.simpleUnicode.CJK_REGEXP",pe);var W=function(a,b,c,d){J.call(this);this.element_=a;this.isTruncated_=!1;this.minFontSize_=b;a=this.element_;if(D){b=Jb(a,"paddingLeft");var e=Jb(a,"paddingRight"),f=Jb(a,"paddingTop"),g=Jb(a,"paddingBottom");b=new Fb(f,e,g,b)}else b=G(a,"paddingLeft"),e=G(a,"paddingRight"),f=G(a,"paddingTop"),g=G(a,"paddingBottom"),b=new Fb(parseFloat(f),parseFloat(e),parseFloat(g),parseFloat(b));if(!D||9<=jb)e=G(a,"borderLeftWidth"),f=G(a,"borderRightWidth"),g=G(a,"borderTopWidth"),h=G(a,"borderBottomWidth"),e=
new Fb(parseFloat(g),parseFloat(f),parseFloat(h),parseFloat(e));else var e=Lb(a,"borderLeft"),f=Lb(a,"borderRight"),g=Lb(a,"borderTop"),h=Lb(a,"borderBottom"),e=new Fb(g,f,h,e);f=a.style.maxWidth;f=(f?parseInt(f,10):a.getBoundingClientRect().width)-e.left-b.left-b.right-e.right;a=a.getBoundingClientRect().height-e.top-b.top-b.bottom-e.bottom;a=new Ya(f,a);this.maxWidth_=a.width;this.maxHeight_=a.height;this.scaledFontSize_=0;this.useMultiline_=c;this.useTruncation_=d;this.logger_=Rd("ddab.layouts.utils.DynamicTextFit");
this.cycleCount_=0;this.init_()};y(W,J);x("ddab.layouts.utils.DynamicTextFit",W);W.addEventListener=W.prototype.addEventListener;W.removeEventListener=W.prototype.removeEventListener;var ve=/\s+/,we={display:"block",margin:0,overflow:"hidden",padding:0,position:"absolute",visibility:"hidden"},xe={HORIZONTAL:"horizontal",VERTICAL:"vertical"};
W.prototype.scaleText=function(){var a=Math.round(parseFloat(G(this.element_,"fontSize"))),b=Db(this.element_).trim().split(ve);if(1!=b.length||!pa(b[0])){a=ye(this,b,a,"vertical");this.scaledFontSize_=a=ye(this,b,a,"horizontal");if(this.useTruncation_){var a=this.scaledFontSize_,c=b;if(!(a!=this.minFontSize_||ze(this,c,a,xe.VERTICAL)&&ze(this,c,a,xe.HORIZONTAL))){var c=Ae(this,c,a,xe.VERTICAL),c=Ae(this,c,a,xe.HORIZONTAL),d=c.join(" "),e=ze(this,c,a,xe.HORIZONTAL,!0),c=ze(this,c,a,xe.HORIZONTAL,
!1),d=1!=b.length||e?d+"\u2026":c?d.slice(0,-4)+"\u2026":Be(this,d,a);zb(this.element_,d);this.isTruncated_=!0}}rc(this,"textfit")}};W.prototype.scaleText=W.prototype.scaleText;W.prototype.setAlternateMinFontSize=function(a,b){var c=Db(this.element_);qe(c,b)&&(this.minFontSize_=a)};W.prototype.setAlternateMinFontSize=W.prototype.setAlternateMinFontSize;W.prototype.getScaledFontSize=function(){return this.scaledFontSize_};W.prototype.getScaledFontSize=W.prototype.getScaledFontSize;
W.prototype.getCycleCount=function(){return this.cycleCount_};W.prototype.getCycleCount=W.prototype.getCycleCount;W.prototype.isTruncated=function(){return this.isTruncated_};W.prototype.isTruncated=W.prototype.isTruncated;
var ze=function(a,b,c,d,e){e=sb("div",null,b.join(" ")+(e?"\u2026":""));a.element_.appendChild(e);b=b.length;var f=G(a.element_,"lineHeight"),g={},g="vertical"==d?{fontSize:c+"px",lineHeight:pa(f)?"normal":f,maxWidth:Math.floor(a.maxWidth_)+"px"}:{fontSize:c+"px",height:a.maxHeight_+"px",lineHeight:"normal"!=f?f:c+"px",maxWidth:Math.floor(a.maxWidth_)+"px",overflow:"auto",whiteSpace:a.useMultiline_&&1<b?"normal":"nowrap"};Wa(g,we);F(e,g);c=e.getBoundingClientRect();a="vertical"==d?Number(a.maxHeight_.toFixed(4))>=
Number(c.height.toFixed(4)):e.scrollWidth<=a.maxWidth_;xb(e);return a},ye=function(a,b,c,d){for(;!ze(a,b,c,d)&&c>a.minFontSize_;)c--,F(a.element_,"font-size",c+"px");return c},Ce=function(a,b){G(a.element_,"line-height");var c=Math.floor(a.maxHeight_/b);return isNaN(c)?-1:c},De=function(a){F(a.element_,{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"})},Be=function(a,b,c){if(a.useMultiline_)F(a.element_,"word-wrap","break-word");else return De(a),b;var d;a.cycleCount_=0;for(var e=
b,f=6;!ze(a,[b],c,xe.VERTICAL,!0)&&0<f;){if(2>Ce(a,c))return De(a),b;d=parseInt(.8*b.length,10);d={reduced:b.substring(0,d),remaining:b.substring(d,b.length)};b=d.reduced;f--;a.cycleCount_++}for(f=16;!ze(a,[b],c,xe.VERTICAL,!0);){if(2>Ce(a,c)||0==f)return De(a),b;6<b.length?(d=b.length-6,d={reduced:b.substring(0,d),remaining:b.substring(d,b.length)},b=d.reduced):b=b.substring(0,b.length-1);f--;a.cycleCount_++}f=0;if(d){for(;ze(a,[b],c,xe.VERTICAL,!0);)b+=d.remaining.substr(f,1),f++,a.cycleCount_++;
b=b.substring(0,b.length-1);b+="\u2026";a.logger_.info(Aa("chars started with ",e.length," ended with ",b.length," removed ",e.length-b.length," chars in ",a.cycleCount_," iterations"))}return b},Ae=function(a,b,c,d){for(;1<b.length&&!ze(a,b,c,d,!0);)b.pop();return b};
W.prototype.init_=function(){var a=parseInt(G(this.element_,"fontSize"),10);F(this.element_,"overflow","hidden");(isNaN(a)||a<this.minFontSize_)&&F(this.element_,"font-size",this.minFontSize_+"px");this.useMultiline_||F(this.element_,"white-space","nowrap")};var X=function(a,b,c,d){return{restrict:"AE",link:function(e,f,g){b(function(){function e(a,b){b&&b.useOriginalText&&(u.textContent=zd);m()}function m(){z=new W(u,af,bf,ic);isNaN(Z)||d.isEmpty(ta)||z.setAlternateMinFontSize(Z,ta);I(z,"textfit",n);var a=u,b=v.RESIZING_ON;me(a,v.RESIZING_OFF);le(a,b);d.isEmpty(u.textContent)?p(!1):z.scaleText()}function n(){p(!0);var a=u,b=v.RESIZING_OFF;me(a,v.RESIZING_ON);le(a,b);oc(z);z=null}function p(b){var e=u.id||"",f,g=null===u.offsetParent||0==u.offsetTop&&
0==u.offsetLeft;b?(b=z.getScaledFontSize(),f=z.isTruncated()):(b=window.getComputedStyle(u).getPropertyValue("font-size"),b=parseInt(b,10),f=!1);e=new Ee(e,Na,Oa,f,b,g);!d.isEmpty(T)&&ic&&c.alignText(u,b,T,ic);f&&!u.hasAttribute(q.TITLE)&&u.setAttribute(q.TITLE,zd);a.$broadcast("textfitcomplete",e)}var q=Fe,v=Ge,u=f[0],z,T=g[q.ALIGN_STYLE],Z=d.toNumberStrict(g[q.ALT_MIN_FONT_SIZE]),Ma=r(g[q.AUTOFIT]),ta=g[q.CHARACTER_SET]||"",Na=r(g.gpaUniformSizeElement),Oa=g[q.GROUP],af=d.toNumberStrict(g[q.MIN_FONT_SIZE])||
X.DEFAULT_MIN_FONT_SIZE,bf=d.toBoolean(g[q.MULTILINE]),zd=qa(u.textContent),ic=d.toBoolean(g[q.TRUNCATE]);if(!Na)Oa="default";else if(d.isEmpty(Oa)||"default"==Oa)Oa="default-uniform";u.setAttribute(q.GROUP,Oa);Ma?b(m):a.$on("fittext",e);u.setAttribute(q.READY_TO_SCALE,"")})}}};x("gpa.layouts.common.directive.textFit",X);X.$inject=["$rootScope","$timeout","textUtils","typeUtils"];X.DIRECTIVE_NAME="gpaTextFit";X.DIRECTIVE_NAME=X.DIRECTIVE_NAME;X.DEFAULT_MIN_FONT_SIZE=10;
var Fe={ALIGN_STYLE:"alignstyle",ALT_MIN_FONT_SIZE:"altminfontsize",AUTOFIT:"autofit",CHARACTER_SET:"characterset",GROUP:"group",MIN_FONT_SIZE:"minfontsize",MULTILINE:"multiline",READY_TO_SCALE:"readytoscale",TITLE:"title",TRUNCATE:"truncate"},Ge={RESIZING_OFF:X.DIRECTIVE_NAME+"-resizing-off",RESIZING_ON:X.DIRECTIVE_NAME+"-resizing-on"},Ee=function(a,b,c,d,e,f){this.id=a;this.doResize=b;this.group=c;this.isTruncated=d;this.scaledFontSize=e;this.isElementHidden=f||!1};X.EventData=Ee;
var He=angular.module("gpa.layouts.common.module.directive.textFit",[oe.name,Vc.name]).directive(X.DIRECTIVE_NAME,X);x("gpa.layouts.common.module.directive.textFit",He);var Y=function(a){this.elements_={image:null,logo:null,text:null};this.excludeType_={image:!1,logo:!1,text:!1};this.imageGroup={};this.logoGroup={};this.textGroup={};this.rootScope=a;this.typeComplete_={image:!1,logo:!1,text:!1};this.useOriginalText_=!0;this.useUniformSize_=!1};x("gpa.layouts.common.controller.DynamicFitCtrl",Y);Y.$inject=["$rootScope"];Y.prototype.checkElementsReady=function(a){a=this.elements_[a];for(var b=0,c;c=a[b];b++)if(!c.hasAttribute("readytoscale"))return!1;return!0};
Y.prototype.checkElementsReady=Y.prototype.checkElementsReady;
Y.prototype.init=function(a,b,c,d,e){this.useUniformSize_=a;this.useOriginalText_=b;this.elements_.image=c;this.elements_.logo=d;this.elements_.text=e;if(this.useUniformSize_){a={length:0};for(var f=b=0,g;g=e[f];f++){var h=g.getAttribute("group");if(pa(null==h?"":String(h))||"default"==h)a[b]=g,a.length=++b}0<a.length&&Ie(this,"text",a)}else Ie(this,"text",e);Ie(this,"image",c);Ie(this,"logo",d);this.rootScope.$on("textfitcomplete",w(this.textFitHandler_,this));this.rootScope.$on("imagefitcomplete",
w(this.imageFitHandler_,this));this.rootScope.$on("logofitcomplete",w(this.logoFitHandler_,this))};Y.prototype.init=Y.prototype.init;Y.prototype.start=function(){this.excludeType_.image||this.rootScope.$broadcast("fitimage");this.excludeType_.logo||this.rootScope.$broadcast("fitlogo");if(!this.excludeType_.text){var a={};a.useOriginalText=this.useOriginalText_;this.rootScope.$broadcast("fittext",a)}};Y.prototype.start=Y.prototype.start;
Y.prototype.setExcludeType=function(a,b){(this.excludeType_[a]=b)&&(this.typeComplete_[a]=!0)};Y.prototype.setExcludeType=Y.prototype.setExcludeType;
Y.prototype.addToGroup=function(a,b,c,d){switch(a){case "text":a=this.textGroup;break;case "image":a=this.imageGroup;break;case "logo":a=this.logoGroup;break;default:throw Error("DynamicFitCtl: Invalid type "+a);}a[b]||(a[b]={attributes:{},elements:[],doResize:!1,complete:0,total:0,allComplete:!1});a[b].doResize=!!d.doResize;a[b].attributes=d;a[b].elements.push(c);a[b].total=a[b].elements.length};Y.prototype.addToGroup=Y.prototype.addToGroup;
Y.prototype.reset=function(){Je(this.textGroup);Je(this.imageGroup);Je(this.logoGroup);for(var a in this.typeComplete_)this.typeComplete_[a]=!1};Y.prototype.reset=Y.prototype.reset;var Je=function(a){for(var b in a)a[b].complete=0,a[b].allComplete=!1},Ie=function(a,b,c){for(var d=0,e;e=c[d];d++){var f={};"text"==b&&(f.doResize=!1);a.addToGroup(b,"default",e,f)}};
Y.prototype.textFitHandler_=function(a,b){if(!this.excludeType_.text)if(b)Ke(this,a.name,b);else throw Error("DynamicFitCtrl text completion: Missing event detail object");};Y.prototype.imageFitHandler_=function(a,b){if(!this.excludeType_.image)if(b)Ke(this,a.name,b);else throw Error("DynamicFitCtrl image completion: Missing event detail object");};
Y.prototype.logoFitHandler_=function(a,b){if(!this.excludeType_.logo)if(b)Ke(this,a.name,b);else throw Error("DynamicFitCtrl logo completion: Missing event detail object");};
var Ke=function(a,b,c){if(!c.group)throw Error("DynamicFitCtl completion event: "+b+" does not contain a group property");var d=c.group,e={};switch(b){case "imagefitcomplete":b="image";e=a.imageGroup;break;case "logofitcomplete":b="logo";e=a.logoGroup;break;case "textfitcomplete":b="text";e=a.textGroup;if(a.useUniformSize_&&e[d]&&e[d].attributes&&c.doResize&&c.scaledFontSize&&!c.isElementHidden){var f=e[d].attributes.scaledFontSize;if(!f||c.scaledFontSize<f)e[d].attributes.scaledFontSize=c.scaledFontSize}break;
default:throw Error("Unknown event type");}c=e[d];c.complete<c.total&&c.complete++;if(c.complete==c.total){c.allComplete=!0;if(a.useUniformSize_&&e==a.textGroup&&e[d].doResize)for(d=0;e=c.elements[d];d++)e.style.fontSize=c.attributes.scaledFontSize+"px";var g;switch(b){case "text":g=a.textGroup;break;case "image":g=a.imageGroup;break;case "logo":g=a.logoGroup}var d=!1,h;for(h in g){if(!g[h].allComplete){d=!1;break}d=!0}if(d){a.typeComplete_[b]=!0;g=!1;for(var m in a.typeComplete_){if(!a.typeComplete_[m]){g=
!1;break}g=!0}g&&(a.rootScope.$broadcast("dynamicfitcomplete"),a.reset())}}},Ne=function(a,b,c){return{restrict:"AE",controller:Y,link:function(d,e,f,g){var h;b(function(){function b(){var a=g.checkElementsReady("logo"),d=g.checkElementsReady("text");g.checkElementsReady("image")&&a&&d&&(angular.isDefined(h)&&(c.cancel(h),h=void 0),g.start())}a.$on("fitdynamicelements",function(a,d){var f=Le,v=e[0],u=v.querySelectorAll(f.IMAGE),z=v.querySelectorAll(f.LOGO),T=v.querySelectorAll(f.TEXT),f=0<v.querySelectorAll(f.UNIFORM).length,
Z=d&&d.useOriginalText,Ma=r(v.attributes.excludelogo)||0==z.length,ta=r(v.attributes.excludetext)||0==T.length;g.setExcludeType("image",r(v.attributes.excludeimage)||0==u.length);g.setExcludeType("logo",Ma);g.setExcludeType("text",ta);g.init(f,Z,u,z,T);v=Me;u=Math.round(v.TOTAL_MS/v.INTERVAL_MS);h=c(b,v.INTERVAL_MS,u)})})}}};x("gpa.layouts.common.directive.dynamicFit",Ne);Ne.$inject=["$rootScope","$timeout","$interval"];
var Le={IMAGE:"[gpa-image-fit]",LOGO:"[gpa-logo-fit]",TEXT:"[gpa-text-fit]",UNIFORM:"[gpa-uniform-size-element]"},Me={INTERVAL_MS:50,TOTAL_MS:1E3};Ne.DIRECTIVE_NAME="gpaDynamicFit";Ne.DIRECTIVE_NAME=Ne.DIRECTIVE_NAME;
var Oe=function(){return{restrict:"AE",require:"^"+Ne.DIRECTIVE_NAME,link:function(a,b,c,d){a=Rd("gpa.layouts.common.directive.uniformSizeElement");b=b[0];var e=c.group;e&&"default"!=e||(a.log(Ld,"uniformSizeElement: Empty or DEFAULT_NON_UNIFORM value for group attribute",void 0),e="default-uniform");a={};var f;r(c[ce.DIRECTIVE_NAME])?f="image":r(c[he.DIRECTIVE_NAME])?f="logo":r(c[X.DIRECTIVE_NAME])&&(f="text",a.doResize=!0);d.addToGroup(f,e,b,a)}}};
x("gpa.layouts.common.directive.uniformSizeElement",Oe);Oe.$inject=["$rootScope"];Oe.DIRECTIVE_NAME="gpaUniformSizeElement";Oe.DIRECTIVE_NAME=Oe.DIRECTIVE_NAME;var Pe=angular.module("gpa.layouts.common.module.directive.dynamicFit",[]).controller("gpa.layouts.common.controller.DynamicFitCtrl",Y).directive(Ne.DIRECTIVE_NAME,Ne).directive(Oe.DIRECTIVE_NAME,Oe);x("gpa.layouts.common.module.directive.dynamicFit",Pe);var Qe=function(a,b){return{restrict:"AE",link:function(c,d){b(function(){var b=d[0],f=a(Db(b));zb(b,"");b=document.createElement("STYLE");zb(b,f(c));document.head.appendChild(b)})}}};x("gpa.layouts.common.directive.dynamicStyles",Qe);Qe.$inject=["$interpolate","$timeout"];Qe.DIRECTIVE_NAME="gpaDynamicStyles";Qe.DIRECTIVE_NAME=Qe.DIRECTIVE_NAME;var Re=angular.module("gpa.layouts.common.module.directive.dynamicStyles",[]).directive(Qe.DIRECTIVE_NAME,Qe);
x("gpa.layouts.common.module.directive.dynamicStyles",Re);var Se=function(a){return{restrict:"AE",scope:{itemClickOnly:"="},link:function(b,c,d){b=c[0];var e=d.itemindex||0;I(b,"mouseover",function(){a.$broadcast("iteminteractionover",e)});I(b,"mouseleave",function(){a.$broadcast("iteminteractionleave","")})}}};x("gpa.layouts.common.directive.itemInteraction",Se);Se.$inject=["$rootScope"];Se.DIRECTIVE_NAME="gpaItemInteraction";Se.DIRECTIVE_NAME=Se.DIRECTIVE_NAME;
var Te=angular.module("gpa.layouts.common.module.directive.itemInteraction",[]).directive(Se.DIRECTIVE_NAME,Se);x("gpa.layouts.common.module.directive.itemInteraction",Te);var Ue=function(){this.pixelRatio_=1};x("gpa.layouts.common.service.DrawShapes",Ue);
var Ve=function(a,b){var c=sb("CANVAS");c.height=b;c.width=a;c.style.position="absolute";return c},We=function(a){a.pixelRatio_=(window.devicePixelRatio||1)/(a.context_.webkitBackingStorePixelRatio||a.context_.mozBackingStorePixelRatio||a.context_.msBackingStorePixelRatio||a.context_.oBackingStorePixelRatio||a.context_.backingStorePixelRatio||1)},Xe=function(a,b){a.canvas_.style.height=b.height+"px";a.canvas_.style.width=b.width+"px";b.halfHeight*=a.pixelRatio_;b.halfWidth*=a.pixelRatio_;b.height*=
a.pixelRatio_;b.width*=a.pixelRatio_;a.canvas_.width=b.width;a.canvas_.height=b.height;return b},Ye=function(a,b){if(isNaN(b)||isNaN(a))return null;b=parseInt(b,10);a=parseInt(a,10);return{halfHeight:parseInt(b/2,10),halfWidth:parseInt(a/2,10),height:b,width:a}},Ze=function(a,b){a.context_.fillStyle=b||"#000000";a.context_.fill();a.context_.restore()},$e=function(a,b,c,d,e,f){c=c||"#FFFFFF";d=parseInt(d,10)*a.pixelRatio_;a.context_.restore();a.context_.fillStyle=c;a.context_.font="bold "+d+"px "+
e;a.context_.textAlign="center";a.context_.textBaseline="middle";a.context_.fillText(b,f.x,f.y)};
Ue.prototype.drawArrow=function(a,b,c,d,e,f,g,h){var m=Ye(a,b);if(null!=m){this.canvas_=Ve(m.width,m.height);this.context_=this.canvas_.getContext("2d");We(this);1<this.pixelRatio_&&(m=Xe(this,m));b=m.height;a=m.width;var n=parseInt(a/5,10),p={x:3*n,y:m.halfHeight};this.context_&&(this.context_.save(),h&&(this.context_.translate(a,0),this.context_.scale(-1*this.pixelRatio_,this.pixelRatio_),p.x=m.halfWidth),this.context_.beginPath(),this.context_.moveTo(0,m.halfHeight),this.context_.lineTo(n,0),this.context_.lineTo(a,
0),this.context_.lineTo(a,b),this.context_.lineTo(n,b),this.context_.lineTo(0,m.halfHeight),this.context_.closePath(),Ze(this,d),$e(this,c,e,g,f,p))}return this.canvas_};Ue.prototype.drawArrow=Ue.prototype.drawArrow;
Ue.prototype.drawStar=function(a,b,c,d,e,f,g,h,m){b=Ye(a,b);if(null!=b&&(this.canvas_=Ve(b.width,b.height),this.context_=this.canvas_.getContext("2d"),We(this),1<this.pixelRatio_&&(b=Xe(this,b)),a=b.halfHeight,h=h&&!isNaN(h)?h:14,b={x:b.halfWidth,y:a},m=m&&!isNaN(m)&&1>Math.abs(m)?m:.75,null!=this.context_)){this.context_.save();this.context_.beginPath();this.context_.translate(b.x,b.y);this.context_.moveTo(0,0-a);for(var n=0;n<h;n++)this.context_.rotate(Math.PI/h),this.context_.lineTo(0,0-a*m),this.context_.rotate(Math.PI/
h),this.context_.lineTo(0,0-a);this.context_.closePath();Ze(this,d);$e(this,c,e,g,f,b)}return this.canvas_};Ue.prototype.drawStar=Ue.prototype.drawStar;var cf=angular.module("gpa.layouts.common.module.service.drawShapes",[]).service("drawShapes",Ue);x("gpa.layouts.common.module.service.drawShapes",cf);var df=function(a,b,c,d){return{restrict:"AE",link:function(e,f,g){b(function(){function b(){var a=g.text,h=g.type||"arrow";if(d.isEmpty(a))f.css("display","none");else{n=G(e,"fontFamily");p=G(e,"fontSize");q=e.getBoundingClientRect();switch(h){case "arrow":v=c.drawArrow(q.width,q.height,a,g.background,g.color,n,p,g.flip);break;case "star":v=c.drawStar(q.width,q.height,a,g.background,g.color,n,p,g.starSpikes,g.starRadiusInset)}wb(e);vb(e,v)}}var e=f[0],n,p,q,v;b();a.$on("redrawsalebadge",b)})}}};
x("gpa.layouts.common.directive.saleBadge",df);df.$inject=["$rootScope","$timeout","drawShapes","typeUtils"];df.DIRECTIVE_NAME="gpaSaleBadge";df.DIRECTIVE_NAME=df.DIRECTIVE_NAME;var ef=angular.module("gpa.layouts.common.module.directive.saleBadge",[cf.name,Vc.name]).directive(df.DIRECTIVE_NAME,df);x("gpa.layouts.common.module.directive.saleBadge",ef);var ff=[Vd.name];x("gpa.layouts.common.application.appDependencies.controllers",ff);var gf=[Pe.name,Re.name,de.name,Te.name,ie.name,ef.name,He.name];x("gpa.layouts.common.application.appDependencies.directives",gf);var hf=[ed.name];x("gpa.layouts.common.application.appDependencies.required",hf);var jf=[xc.name,Uc.name,Zc.name,cf.name,jd.name,ld.name,Dd.name,Fd.name,Vc.name];x("gpa.layouts.common.application.appDependencies.services",jf);x("gpa.layouts.common.application.LAYOUT_DEPENDENCIES_NAMESPACE","gpa.layouts.layoutDependencies");var kf=Ja(ff,gf,hf,jf);x("gpa.layouts.common.application.DEFAULT_DEPENDENCIES",kf);var lf=function(){var a=kf;null!=aa("gpa.layouts.layoutDependencies")&&(a=Ja(kf,aa("gpa.layouts.layoutDependencies")));return a};x("gpa.layouts.common.application.getDependencies",lf);var mf=angular.module("gpa.layouts.common.module.application",lf());x("gpa.layouts.common.module.application",mf);